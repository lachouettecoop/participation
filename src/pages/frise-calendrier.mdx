import FriseCalendrier from "../components/Indicateurs/FriseCalendrier.js";
import ImportantText from "../ui/ImportantText.js";
import subWeeks from "date-fns/sub_weeks";
import addWeeks from "date-fns/add_weeks";
import format from "date-fns/format";

# Frise calendrier de participation

Cet indicateur permet de sensibiliser à la régularité et aux futurs blocages que
cela pourrait engendrer. Il affiche les informations suivantes :

- la date de dernière Piaf
- les 4 semaines - en vert - après cette dernière Piaf
- et en orange la suite jusqu'à la prochaine Piaf (s'il y en a une)

Cette page présente les différents états possibles.

## Prochaine PIAF après les 4 semaines

<FriseCalendrier
  dateDerniere={format(subWeeks(new Date(), 3), "DD/MM/YYYY")}
  dateProchaine={format(addWeeks(new Date(), 3), "DD/MM/YYYY")}
/>

<br />

<FriseCalendrier
  dateDerniere={format(subWeeks(new Date(), 6), "DD/MM/YYYY")}
  dateProchaine={format(addWeeks(new Date(), 3), "DD/MM/YYYY")}
/>

<br />

<FriseCalendrier
  dateDerniere={format(subWeeks(new Date(), 0), "DD/MM/YYYY")}
  dateProchaine={format(addWeeks(new Date(), 5), "DD/MM/YYYY")}
/>

## Prochaine PIAF dans les 4 semaines

<FriseCalendrier
  dateDerniere={format(subWeeks(new Date(), 1), "DD/MM/YYYY")}
  dateProchaine={format(addWeeks(new Date(), 3), "DD/MM/YYYY")}
/>

<br />

<FriseCalendrier
  dateDerniere={format(subWeeks(new Date(), 4), "DD/MM/YYYY")}
  dateProchaine={format(addWeeks(new Date(), 0), "DD/MM/YYYY")}
/>

<br />

<FriseCalendrier
  dateDerniere={format(subWeeks(new Date(), 2), "DD/MM/YYYY")}
  dateProchaine={format(addWeeks(new Date(), 1), "DD/MM/YYYY")}
/>

## Pas de PIAF

Dans le cas où aucune PIAF n’a été faite, ou dans le cas où aucune n’est prévue…
rien n’est affiché.

<FriseCalendrier
  dateDerniere="-"
  dateProchaine={format(addWeeks(new Date(), 2), "DD/MM/YYYY")}
/>

<FriseCalendrier
  dateDerniere={format(subWeeks(new Date(), 2), "DD/MM/YYYY")}
  dateProchaine="-"
/>

## Retardataires

Certaines personnes n’ont pas fait leur PIAF depuis longtemps… par exemple il y
a 33 semaines.

<ImportantText mt={4}>
  Question : comment affiche-t-on cette information ?
</ImportantText>

<FriseCalendrier
  dateDerniere={format(subWeeks(new Date(), 33), "DD/MM/YYYY")}
  dateProchaine={format(addWeeks(new Date(), 2), "DD/MM/YYYY")}
/>

<ImportantText mt={4}>
  TODO : il reste encore un bug sur les couleurs lors du passage des années (et
  les numéros de semaine qui reviennent à 1).
</ImportantText>
