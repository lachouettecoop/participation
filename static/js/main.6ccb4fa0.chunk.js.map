{"version":3,"sources":["helpers/errors.tsx","queries.ts","providers/user.tsx","helpers/apollo.ts","providers/theme.tsx","components/Dialog.tsx","providers/dialog.tsx","helpers/request.ts","pages/anonymous/Login.tsx","pages/anonymous/index.tsx","pages/authenticated/Home.tsx","components/BackButton.tsx","components/Loading.tsx","helpers/date.ts","components/ActivePiaf.tsx","components/ActivePiafs.tsx","components/UpcomingPiaf.tsx","components/UpcomingPiafs.tsx","components/SendEmail.tsx","utils/constants.tsx","pages/authenticated/User.tsx","pages/authenticated/index.tsx","images/logo_white.svg","components/Logout.tsx","App.tsx","index.tsx"],"names":["apiKey","process","Bugsnag","start","releaseStage","enabledReleaseStages","appVersion","metadata","deployDate","Date","toString","deployAuthor","plugins","BugsnagPluginReact","handleError","error","console","alert","message","notify","Boundary","getPlugin","createErrorBoundary","React","Container","ErrorBlock","Typography","variant","aria-hidden","String","Text","ErrorMessage","ErrorBoundary","children","FallbackComponent","USER_BY_ID","gql","USER_BY_CODE","USER_SEARCH","PIAFS","FILL","USER_UPDATE_STOP_ABSENCE","USER_SET_AWAITING_PARTICIPATION_GROUP","UserContext","createContext","STORAGE_KEY","getStoredUser","stored","localStorage","getItem","JSON","parse","UserProvider","useState","auth","setAuth","login","a","userId","token","apollo","query","variables","id","result","user","data","rolesChouette","find","roleUniqueId","prenom","setItem","stringify","Provider","value","logout","removeItem","useUser","useContext","link","createHttpLink","uri","authLink","setContext","_","previous","headers","client","ApolloClient","concat","cache","InMemoryCache","TITLE_FONT","TEXT_FONT","SECONDARY_COLOR","grey","THEME","createMuiTheme","typography","fontFamily","body1","fontSize","body2","subtitle1","subtitle2","h1","fontWeight","h2","h3","h4","h5","h6","palette","primary","main","secondary","contrastThreshold","tonalOffset","ThemeProvider","theme","CssBaseline","Dialog","open","handleClose","title","callback","handleConfirm","ok","setTimeout","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","onClick","color","DialogContext","DialogProvider","setOpen","setTitle","setMessage","setCallback","closeDialog","openDialog","newMessage","newTitle","undefined","openQuestion","Promise","resolve","useDialog","post","path","body","fetch","method","response","HttpError","status","statusText","json","sendEmail","recipient","subject","Error","FormData","append","LoginPage","loading","setLoading","handleSubmit","event","preventDefault","currentTarget","maxWidth","onSubmit","TextField","type","name","defaultValue","window","lcc_defaultLogin","label","fullWidth","lcc_defaultPassword","margin","size","disabled","Anonymous","pathname","useLocation","Login","to","Row","spacing","HomePage","push","useHistory","useLazyQuery","search","useEffect","scrollTo","top","document","scrollHeight","behavior","elements","namedItem","code","handleSearch","lastname","firstname","nom","autoFocus","List","users","slice","sort","left","right","map","codeBarre","email","ListItem","button","component","Link","ListItemText","PositionnedButton","BackButton","timer","setTimer","goBack","timeout","clearTimeout","onKeyDown","key","addEventListener","removeEventListener","$height","Loading","height","CircularProgress","formatInFrench","date","pattern","format","locale","fr","formatTime","queryDate","ActivePiaf","piaf","handleClick","mutate","mutation","Box","marginY","pourvu","endIcon","Check","creneau","debut","fin","titre","RedText","ActivePiafs","now","useQuery","after","before","addDays","piafs","length","activePiafs","filter","p","statut","mb","UpcomingPiaf","end","disableGutters","orderPiafsByDate","UpcomingPiafs","CloseButton","IconButton","TextInput","Title","SendEmail","show","dialogContent","emailAddress","emailSubject","comment","setComment","handleSendEmail","content","toUpperCase","telephone","join","then","catch","autoComplete","Close","multiline","required","onChange","target","MAIL_COMMISSION_PARTICIPATION","COLORS","chouette","StatusText","$status","toLowerCase","Status","Grid","AbsenceText","UserPage","useParams","openSendEmailDialog","setOpenSendEmailDialog","enabled","nbPiafEffectuees","nbPiafAttendues","absenceLongueDureeSansCourses","attenteCommissionParticipation","nbPiafs","nbDemiPiaf","setUserAsAwaitingResult","my","align","container","item","xs","md","Authenticated","next","params","substr","split","forEach","part","tuple","decodeURIComponent","getParams","Home","User","_extends","Object","assign","i","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","fill","transform","SvgLogoWhite","_ref","svgRef","titleId","props","xmlns","width","viewBox","ref","ForwardRef","LogoutWrapper","StyledButton","AlertAccount","Alert","Logout","iframeSrc","setIframeSrc","confirmLogout","startIcon","url","getElementById","focus","severity","Header","Menu","MenuItemButton","IFrame","App","CalendarToday","Assignment","SwapHoriz","Chat","src","style","borderStyle","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.6ccb4fa0.chunk.js","sourcesContent":["import React, { ErrorInfo, FC } from \"react\"\nimport Bugsnag from \"@bugsnag/js\"\nimport BugsnagPluginReact from \"@bugsnag/plugin-react\"\nimport styled from \"@emotion/styled/macro\"\nimport { Typography } from \"@material-ui/core\"\n\nconst apiKey = process.env.REACT_APP_BUGSNAG_KEY\n\nif (apiKey) {\n  Bugsnag.start({\n    apiKey,\n    releaseStage: process.env.NODE_ENV,\n    enabledReleaseStages: [\"production\"],\n    appVersion: process.env.REACT_APP_COMMIT,\n    metadata: {\n      deployDate: new Date().toString(),\n      deployAuthor: process.env.REACT_APP_AUTHOR,\n    },\n    plugins: [new BugsnagPluginReact()],\n  })\n}\n\n// TODO: show nicer message\nexport const handleError = (error: Error) => {\n  console.error(error)\n  alert(error.message)\n  if (apiKey) {\n    Bugsnag.notify(error)\n  }\n}\n\nconst Boundary = apiKey ? Bugsnag.getPlugin(\"react\")?.createErrorBoundary(React) : null\n\nconst Container = styled.div`\n  padding: 1rem;\n  h2 {\n    color: #e53935;\n    margin: 1rem 0;\n  }\n  code {\n    display: block;\n    margin-top: 3rem;\n    color: #aaa;\n  }\n`\n\n// https://github.com/bugsnag/bugsnag-js/blob/next/packages/plugin-react/types/bugsnag-plugin-react.d.ts\ninterface FallbackProps {\n  error: Error\n  info?: ErrorInfo\n  clearError?: () => void\n}\n\nexport const ErrorBlock = ({ error }: FallbackProps) => (\n  <Container>\n    <Typography variant=\"h2\">\n      <span aria-hidden>🐞</span>\n      <br />\n      Une erreur est survenue\n    </Typography>\n    <Typography>Essayez de recharger la page</Typography>\n    <code>{String(error)}</code>\n  </Container>\n)\n\nconst Text = styled.p`\n  color: #e53935;\n`\n\ninterface MessageProps {\n  error: Error\n}\n\nexport const ErrorMessage = ({ error }: MessageProps) => <Text>Erreur : {error.message}</Text>\n\nexport const ErrorBoundary: FC = ({ children }) =>\n  Boundary ? <Boundary FallbackComponent={ErrorBlock}>{children}</Boundary> : <>{children}</>\n","import { gql } from \"@apollo/client\"\n\nexport const USER_BY_ID = gql`\n  query($id: ID!) {\n    user(id: $id) {\n      id\n      enabled\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      codeBarre\n    }\n  }\n`\n\nexport const USER_BY_CODE = gql`\n  query($code: String!) {\n    users(codeBarre: $code) {\n      id\n      enabled\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      telephone\n      statut\n      nbPiafEffectuees\n      nbPiafAttendues\n      absenceLongueDureeSansCourses\n      codeBarre\n      attenteCommissionParticipation\n      nbDemiPiaf\n    }\n  }\n`\n\nexport const USER_SEARCH = gql`\n  query($lastname: String, $firstname: String) {\n    users(nom: $lastname, prenom: $firstname) {\n      id\n      codeBarre\n      enabled\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n    }\n  }\n`\n\nexport const PIAFS = gql`\n  query PIAFS($userId: String, $after: String, $before: String, $statut: String) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }, statut: $statut) {\n      id\n      statut\n      pourvu\n      creneau {\n        id\n        titre\n        debut\n        fin\n      }\n      piaffeur {\n        id\n        prenom\n        nom\n        username\n      }\n      role {\n        id\n        roleUniqueId\n        libelle\n      }\n    }\n  }\n`\n\nexport const FILL = gql`\n  mutation($id: ID!) {\n    updatePiaf(input: { id: $id, pourvu: true }) {\n      piaf {\n        id\n        pourvu\n      }\n      clientMutationId\n    }\n  }\n`\n\nexport const USER_UPDATE_STOP_ABSENCE = gql`\n  mutation($id: ID!) {\n    updateUser(input: { id: $id, absenceLongueDureeSansCourses: false }) {\n      user {\n        id\n        username\n        nom\n        prenom\n        absenceLongueDureeSansCourses\n      }\n    }\n  }\n`\n\nexport const USER_SET_AWAITING_PARTICIPATION_GROUP = gql`\n  mutation($id: ID!) {\n    updateUser(input: { id: $id, attenteCommissionParticipation: true }) {\n      user {\n        id\n        username\n        nom\n        prenom\n        attenteCommissionParticipation\n      }\n    }\n  }\n`\n","import type { User } from \"src/types/model\"\n\nimport { createContext, useContext, useState, FC } from \"react\"\n\nimport { USER_BY_ID } from \"src/queries\"\nimport apollo from \"src/helpers/apollo\"\n\nexport interface LoginResponse {\n  userId: number\n  token: string\n}\n\nexport interface Auth {\n  token: string\n  user: User\n}\n\nexport interface IUserContext<IsAuthenticated extends boolean = false> {\n  auth: IsAuthenticated extends true ? Auth : Auth | null\n  login: (response: LoginResponse) => Promise<void>\n  logout: () => void\n}\n\nconst UserContext = createContext<IUserContext>({} as IUserContext)\n\nconst STORAGE_KEY = \"auth\"\n\nexport const getStoredUser = () => {\n  const stored = localStorage.getItem(STORAGE_KEY)\n  if (!stored) {\n    return null\n  }\n  return JSON.parse(stored) as Auth\n}\n\nexport const UserProvider: FC = ({ children }) => {\n  const [auth, setAuth] = useState<Auth | null>(getStoredUser)\n\n  const login = async ({ userId, token }: LoginResponse) => {\n    const result = await apollo.query<{ user: User }>({\n      query: USER_BY_ID,\n      variables: { id: `api/users/${userId}` },\n    })\n    const { user } = result.data\n\n    if (!user.rolesChouette.find(({ roleUniqueId }) => roleUniqueId === \"GH\")) {\n      alert(`${user.prenom}, tu n’es pas Grand Hibou`)\n      return\n    }\n\n    const data = {\n      token,\n      user,\n    }\n    setAuth(data)\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(data))\n  }\n\n  const logout = () => {\n    setAuth(null)\n    localStorage.removeItem(STORAGE_KEY)\n  }\n\n  return <UserContext.Provider value={{ auth, login, logout }}>{children}</UserContext.Provider>\n}\n\nexport function useUser<IsAuthenticated extends boolean = false>() {\n  return useContext(UserContext) as IUserContext<IsAuthenticated>\n}\n","import { ApolloClient, createHttpLink, InMemoryCache } from \"@apollo/client\"\nimport { setContext } from \"@apollo/client/link/context\"\n\nimport { getStoredUser } from \"src/providers/user\"\n\nconst link = createHttpLink({\n  uri: `${process.env.REACT_APP_API}/api/graphql`,\n})\n\nconst authLink = setContext((_, previous) => {\n  const user = getStoredUser()\n  if (!user) {\n    return previous\n  }\n  return {\n    ...previous,\n    headers: {\n      ...previous.headers,\n      \"X-Auth-Token\": user.token,\n    },\n  }\n})\n\nconst client = new ApolloClient({\n  link: authLink.concat(link),\n  cache: new InMemoryCache(),\n})\n\nexport default client\n","import type { FC } from \"react\"\n\nimport { createMuiTheme, ThemeProvider as MUIThemeProvider, Theme as MUITheme } from \"@material-ui/core/styles\"\nimport { CssBaseline } from \"@material-ui/core\"\nimport { grey } from \"@material-ui/core/colors\"\nimport { ThemeProvider as EmotionThemeProvider } from \"@emotion/react/macro\"\n\n// see public/index.html\nconst TITLE_FONT = \"Montserrat, sans-serif\" // https://style.lachouettecoop.fr/#/typographie?a=titres-et-sous-titres\nconst TEXT_FONT = \"Cabin, sans-serif\" // https://style.lachouettecoop.fr/#/typographie?a=texte\n\nconst MAIN_COLOR = \"#3A5447\" // https://style.lachouettecoop.fr/#/couleurs\nconst SECONDARY_COLOR = grey[500]\n\ndeclare module \"@emotion/react\" {\n  // eslint-disable-next-line @typescript-eslint/no-empty-interface\n  export interface Theme extends MUITheme {}\n}\n\nconst THEME = createMuiTheme({\n  typography: {\n    fontFamily: TEXT_FONT,\n    body1: {\n      fontFamily: TEXT_FONT,\n      fontSize: \"1rem\",\n    },\n    body2: {\n      fontFamily: TEXT_FONT,\n      fontSize: \"1rem\",\n    },\n    subtitle1: {\n      fontFamily: TITLE_FONT,\n    },\n    subtitle2: {\n      fontFamily: TITLE_FONT,\n    },\n    h1: {\n      fontFamily: TITLE_FONT,\n      fontWeight: 600,\n      fontSize: \"2.5rem\",\n    },\n    h2: {\n      fontFamily: TITLE_FONT,\n      fontWeight: 600,\n      fontSize: \"1.5rem\",\n    },\n    h3: {\n      fontFamily: TITLE_FONT,\n      fontWeight: 500,\n    },\n    h4: {\n      fontFamily: TITLE_FONT,\n    },\n    h5: {\n      fontFamily: TITLE_FONT,\n    },\n    h6: {\n      fontFamily: TITLE_FONT,\n    },\n  },\n  palette: {\n    primary: {\n      // light: will be calculated from palette.primary.main,\n      main: MAIN_COLOR,\n      // dark: will be calculated from palette.primary.main,\n      // contrastText: will be calculated to contrast with palette.primary.main\n    },\n    secondary: {\n      main: SECONDARY_COLOR,\n    },\n    // Used by `getContrastText()` to maximize the contrast between\n    // the background and the text.\n    contrastThreshold: 3,\n    // Used by the functions below to shift a color's luminance by approximately\n    // two indexes within its tonal palette.\n    // E.g., shift from Red 500 to Red 300 or Red 700.\n    tonalOffset: 0.2,\n  },\n})\n\nconst ThemeProvider: FC = ({ children }) => (\n  <EmotionThemeProvider theme={THEME}>\n    <MUIThemeProvider theme={THEME}>\n      <CssBaseline />\n      {children}\n    </MUIThemeProvider>\n  </EmotionThemeProvider>\n)\n\nexport default ThemeProvider\n","import {\n  Button,\n  Dialog as MuiDialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@material-ui/core\"\n\ninterface Props {\n  open: boolean\n  handleClose: () => void\n  title: string\n  message: string\n  callback?: (ok: boolean) => void\n}\n\nconst Dialog = ({ open, handleClose, title, message, callback }: Props) => {\n  const handleConfirm = (ok: boolean) => () => {\n    if (callback) {\n      setTimeout(callback, 300, ok)\n    }\n    handleClose()\n  }\n\n  return (\n    <MuiDialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">{message}</DialogContentText>\n      </DialogContent>\n      {callback ? (\n        <DialogActions>\n          <Button onClick={handleConfirm(true)} color=\"primary\">\n            Oui\n          </Button>\n          <Button onClick={handleConfirm(false)} color=\"primary\">\n            Non\n          </Button>\n        </DialogActions>\n      ) : (\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            OK\n          </Button>\n        </DialogActions>\n      )}\n    </MuiDialog>\n  )\n}\n\nexport default Dialog\n","import { createContext, useContext, useState, FC } from \"react\"\n\nimport Dialog from \"src/components/Dialog\"\n\ntype Callback = (choice: boolean) => void\n\ninterface IDialogContext {\n  openDialog: (message: string, title?: string) => void\n  openQuestion: (message: string, title?: string) => Promise<boolean>\n  closeDialog: () => void\n}\n\nconst DialogContext = createContext({} as IDialogContext)\n\nexport const DialogProvider: FC = ({ children }) => {\n  const [open, setOpen] = useState(false)\n  const [title, setTitle] = useState(\"\")\n  const [message, setMessage] = useState(\"\")\n  const [callback, setCallback] = useState<Callback>()\n\n  const openDialog = (newMessage: string, newTitle = \"\") => {\n    setMessage(newMessage)\n    setTitle(newTitle)\n    setCallback(undefined)\n    setOpen(true)\n  }\n\n  const openQuestion = (newMessage: string, newTitle = \"\") => {\n    setMessage(newMessage)\n    setTitle(newTitle)\n    return new Promise((resolve: Callback) => {\n      setCallback(() => resolve)\n      setOpen(true)\n    })\n  }\n\n  const closeDialog = () => {\n    setOpen(false)\n  }\n\n  return (\n    <DialogContext.Provider value={{ openDialog, openQuestion, closeDialog }}>\n      {children}\n      <Dialog open={open} handleClose={closeDialog} title={title} message={message} callback={callback} />\n    </DialogContext.Provider>\n  )\n}\n\nexport const useDialog = () => useContext(DialogContext)\n","import HttpError from \"standard-http-error\"\nimport { getStoredUser } from \"src/providers/user\"\n\nexport const post = async (path: string, body: BodyInit, headers?: HeadersInit) => {\n  const response = await fetch(`${process.env.REACT_APP_API}/${path}`, {\n    method: \"POST\",\n    body,\n    headers,\n  })\n  if (!response.ok) {\n    throw new HttpError(response.status, response.statusText)\n  }\n  return response.json()\n}\n\nexport const getParams = (search: string) => {\n  const params: Record<string, string> = {}\n  search\n    .substr(1)\n    .split(\"&\")\n    .forEach((part) => {\n      if (part) {\n        const tuple = part.split(\"=\")\n        if (tuple.length === 2) {\n          params[tuple[0]] = decodeURIComponent(tuple[1])\n        }\n      }\n    })\n  return params\n}\n\nexport const sendEmail = async (recipient: string, subject: string, message: string) => {\n  const user = getStoredUser()\n\n  if (!user) {\n    throw new Error(\"You must be authenticated to trigger the sending of an email\")\n  }\n\n  const headers = {\n    \"X-Auth-Token\": user.token,\n  }\n\n  const data = new FormData()\n  data.append(\"sujet\", subject)\n  data.append(\"email\", recipient)\n  data.append(\"corps\", message)\n\n  return await post(\"dist_api/send_email\", data, headers)\n}\n","import { FormEvent, useState } from \"react\"\nimport { Container, TextField, Button } from \"@material-ui/core\"\n\nimport { useUser, LoginResponse } from \"src/providers/user\"\nimport { post } from \"src/helpers/request\"\nimport { handleError } from \"src/helpers/errors\"\n\nconst LoginPage = () => {\n  const [loading, setLoading] = useState(false)\n\n  const { login } = useUser()\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    const body = new FormData(event.currentTarget)\n    setLoading(true)\n    try {\n      const auth: LoginResponse = await post(\"login_api\", body)\n      await login(auth)\n    } catch (error) {\n      handleError(error as Error)\n    }\n    setLoading(false)\n  }\n\n  return (\n    <Container maxWidth=\"xs\">\n      <form onSubmit={handleSubmit}>\n        <p>Cette application permet de gérer l’accueil du magasin. Il faut être Grand Hibou pour se connecter.</p>\n        <TextField\n          type=\"email\"\n          name=\"username\"\n          defaultValue={window.localStorage.lcc_defaultLogin || \"\"}\n          label=\"E-mail\"\n          fullWidth\n          variant=\"outlined\"\n        />\n        <TextField\n          type=\"password\"\n          name=\"password\"\n          defaultValue={window.localStorage.lcc_defaultPassword || \"\"}\n          label=\"Mot de passe\"\n          fullWidth\n          variant=\"outlined\"\n          margin=\"normal\"\n        />\n        <Button type=\"submit\" fullWidth size=\"large\" variant=\"contained\" color=\"primary\" disabled={loading}>\n          Connexion\n        </Button>\n      </form>\n    </Container>\n  )\n}\n\nexport default LoginPage\n","import { Redirect, Route, Switch, useLocation } from \"react-router-dom\"\nimport { Container } from \"@material-ui/core\"\n\nimport LoginPage from \"src/pages/anonymous/Login\"\n\nconst Anonymous = () => {\n  const { pathname } = useLocation()\n\n  return (\n    <Container>\n      <Switch>\n        <Route path=\"/login\">\n          <LoginPage />\n        </Route>\n        <Redirect to={`/login?next=${pathname}`} />\n      </Switch>\n    </Container>\n  )\n}\n\nexport default Anonymous\n","import type { User } from \"src/types/model\"\n\nimport { FormEvent, useEffect } from \"react\"\nimport { Link, useHistory } from \"react-router-dom\"\nimport { useLazyQuery } from \"@apollo/client\"\nimport { Button, Container, TextField, List, ListItem, ListItemText } from \"@material-ui/core\"\n\nimport { useUser } from \"src/providers/user\"\nimport { USER_SEARCH } from \"src/queries\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport styled from \"@emotion/styled/macro\"\n\nconst Row = styled.div`\n  > div {\n    margin-bottom: ${({ theme }) => theme.spacing(1)}px;\n  }\n  @media (min-width: 470px) {\n    display: flex;\n    > div {\n      flex: 1;\n      &:first-of-type {\n        margin-right: ${({ theme }) => theme.spacing(1)}px;\n      }\n    }\n  }\n`\n\ninterface Result {\n  users: User[]\n}\n\nconst HomePage = () => {\n  const { auth } = useUser<true>()\n  const { push } = useHistory()\n  const [search, { loading, error, data }] = useLazyQuery<Result>(USER_SEARCH)\n\n  useEffect(() => {\n    //Go to the bottom of the screen to see the search results\n    window.scrollTo({\n      top: document.body.scrollHeight,\n      behavior: \"auto\",\n    })\n  }, [data])\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    const { elements } = event.currentTarget\n    const { value: code } = elements.namedItem(\"code\") as HTMLInputElement\n    push(\"/user/\" + code)\n  }\n\n  const handleSearch = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    const { elements } = event.currentTarget\n    const { value: lastname } = elements.namedItem(\"lastname\") as HTMLInputElement\n    const { value: firstname } = elements.namedItem(\"firstname\") as HTMLInputElement\n    if (lastname || firstname) {\n      search({ variables: { lastname, firstname } })\n    } else {\n      alert(\"Entrez au moins le début du nom ou du prénom.\")\n    }\n  }\n\n  return (\n    <Container maxWidth=\"xs\">\n      <p>\n        Grand Hibou : {auth.user.prenom} {auth.user.nom}\n      </p>\n      <form onSubmit={handleSubmit}>\n        <TextField\n          id=\"codeInput\"\n          name=\"code\"\n          label=\"Code-barres\"\n          fullWidth\n          variant=\"outlined\"\n          margin=\"normal\"\n          autoFocus\n        />\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth size=\"large\">\n          Valider\n        </Button>\n      </form>\n      <form onSubmit={handleSearch}>\n        <p>Tu peux aussi chercher par nom, mais la ou le chouettos doit présenter sa carte de membre :</p>\n        <Row>\n          <TextField name=\"lastname\" label=\"Nom\" variant=\"outlined\" fullWidth />\n          <TextField name=\"firstname\" label=\"Prénom\" variant=\"outlined\" fullWidth />\n        </Row>\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth size=\"large\" disabled={loading}>\n          Rechercher\n        </Button>\n        {data && (\n          <List>\n            {data.users\n              .slice()\n              .sort((left, right) => (left.nom > right.nom ? 1 : -1))\n              .map(({ id, codeBarre, prenom, nom, email }) => (\n                <ListItem key={id} button component={Link} to={`/user/${codeBarre}`}>\n                  <ListItemText primary={`${prenom} ${nom}`} secondary={email} />\n                </ListItem>\n              ))}\n          </List>\n        )}\n        {error && <ErrorMessage error={error} />}\n      </form>\n    </Container>\n  )\n}\n\nexport default HomePage\n","import { useEffect, useState } from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport { Button } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nconst INITIAL_TIMER_SECONDS = 30\n\nconst PositionnedButton = styled(Button)`\n  position: absolute;\n  top: 8px;\n  left: 8px;\n`\n\nconst BackButton = () => {\n  const [timer, setTimer] = useState(INITIAL_TIMER_SECONDS)\n  const { goBack } = useHistory()\n\n  useEffect(() => {\n    if (timer <= 0) {\n      goBack()\n      return\n    }\n    const timeout = setTimeout(() => setTimer(timer - 1), 1000)\n    return () => {\n      clearTimeout(timeout)\n    }\n  }, [timer, goBack])\n\n  useEffect(() => {\n    const onKeyDown = ({ key }: KeyboardEvent) => {\n      if (key === \"Escape\") {\n        goBack()\n      }\n    }\n    document.addEventListener(\"keydown\", onKeyDown, false)\n    return () => {\n      document.removeEventListener(\"keydown\", onKeyDown)\n    }\n  })\n\n  return <PositionnedButton onClick={goBack}>Retour (Echap – {timer})</PositionnedButton>\n}\n\nexport default BackButton\n","import styled from \"@emotion/styled/macro\"\nimport { CircularProgress } from \"@material-ui/core\"\n\nconst Container = styled.div<{ $height: number }>`\n  height: ${({ $height }) => $height}px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\ninterface Props {\n  height?: number\n}\n\nconst Loading = ({ height = 300 }: Props) => {\n  return (\n    <Container $height={height}>\n      <CircularProgress />\n    </Container>\n  )\n}\n\nexport default Loading\n","import { format } from \"date-fns\"\nimport fr from \"date-fns/locale/fr\"\n\nconst formatInFrench = (date: Date | number | string, pattern: string) => {\n  if (typeof date === \"string\") {\n    date = new Date(date)\n  }\n  return format(date, pattern, { locale: fr })\n}\n\nexport const formatDate = (date: Date | number | string) => formatInFrench(date, \"EEEE d MMMM\")\n\nexport const formatTime = (date: Date | number | string) => formatInFrench(date, \"HH:mm\")\n\nexport const queryDate = (date: Date | number) => format(date, \"yyyy-MM-dd\")\n","import type { PIAF } from \"src/types/model\"\n\nimport { useState } from \"react\"\nimport { Box, Button } from \"@material-ui/core\"\nimport { Check } from \"@material-ui/icons\"\n\nimport apollo from \"src/helpers/apollo\"\nimport { FILL } from \"src/queries\"\nimport { handleError } from \"src/helpers/errors\"\nimport { formatTime } from \"src/helpers/date\"\n\ninterface Props {\n  piaf: PIAF\n}\n\nconst ActivePiaf = ({ piaf }: Props) => {\n  const [loading, setLoading] = useState(false)\n\n  const handleClick = async () => {\n    setLoading(true)\n    try {\n      await apollo.mutate({ mutation: FILL, variables: { id: piaf.id } })\n    } catch (error) {\n      handleError(error as Error)\n    }\n    setLoading(false)\n  }\n\n  return (\n    <Box marginY={2}>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        size=\"large\"\n        onClick={handleClick}\n        disabled={piaf.pourvu || loading}\n        endIcon={piaf.pourvu ? <Check /> : null}\n      >\n        De {formatTime(piaf.creneau.debut)} à {formatTime(piaf.creneau.fin)} : {piaf.creneau.titre}\n      </Button>\n    </Box>\n  )\n}\n\nexport default ActivePiaf\n","import type { PIAF } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { Box, Typography } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\nimport { addDays } from \"date-fns\"\n\nimport { PIAFS } from \"src/queries\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport { queryDate } from \"src/helpers/date\"\nimport ActivePiaf from \"src/components/ActivePiaf\"\nimport Loading from \"src/components/Loading\"\n\ninterface Results {\n  piafs: PIAF[]\n}\n\ninterface Props {\n  userId: string\n}\n\nconst RedText = styled(Typography)`\n  color: red;\n`\n\nconst ActivePiafs = ({ userId }: Props) => {\n  const now = new Date()\n  const { loading, error, data } = useQuery<Results>(PIAFS, {\n    variables: {\n      userId,\n      after: queryDate(now),\n      before: queryDate(addDays(now, 1)),\n    },\n  })\n\n  if (loading) {\n    return <Loading height={150} />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data || !data.piafs.length) {\n    return null\n  }\n\n  const activePiafs = data.piafs.filter((p) => p.statut === \"occupe\")\n  if (!activePiafs.length) {\n    return null\n  }\n\n  return (\n    <Box mb={4}>\n      <Typography variant=\"h2\">Tu es ici pour faire ta PIAF ?</Typography>\n      <p>Si oui, clique dessus pour valider ta présence :</p>\n      {activePiafs.map((piaf) => (\n        <ActivePiaf piaf={piaf} key={piaf.id} />\n      ))}\n      <RedText variant=\"h6\">La PIAF sera comptabilisée demain</RedText>\n    </Box>\n  )\n}\n\nexport default ActivePiafs\n","import type { PIAF } from \"src/types/model\"\n\nimport { ListItem, ListItemText } from \"@material-ui/core\"\n\nimport { formatDate, formatTime } from \"src/helpers/date\"\n\ninterface Props {\n  piaf: PIAF\n}\n\nconst UpcomingPiaf = ({ piaf }: Props) => {\n  const start = piaf.creneau.debut\n  const end = piaf.creneau.fin\n  const title = piaf.creneau.titre\n\n  return (\n    <ListItem disableGutters>\n      <ListItemText primary={`${formatDate(start)} de ${formatTime(start)} à ${formatTime(end)}`} secondary={title} />\n    </ListItem>\n  )\n}\n\nexport default UpcomingPiaf\n","import type { PIAF } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { Typography, List, Box } from \"@material-ui/core\"\nimport { addDays } from \"date-fns\"\n\nimport { PIAFS } from \"src/queries\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport { queryDate } from \"src/helpers/date\"\nimport UpcomingPiaf from \"src/components/UpcomingPiaf\"\nimport Loading from \"src/components/Loading\"\n\ninterface Results {\n  piafs: PIAF[]\n}\n\ninterface Props {\n  userId: string\n}\n\nconst orderPiafsByDate = (left: PIAF, right: PIAF) => (left.creneau.debut > right.creneau.debut ? 1 : -1)\n\nconst UpcomingPiafs = ({ userId }: Props) => {\n  const now = new Date()\n  const { loading, error, data } = useQuery<Results>(PIAFS, {\n    variables: {\n      userId,\n      after: queryDate(addDays(now, 1)),\n    },\n  })\n\n  if (loading) {\n    return <Loading height={150} />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  const piafs = data?.piafs.filter(({ statut }) => statut !== \"remplacement\").sort(orderPiafsByDate)\n\n  return (\n    <Box mb={4}>\n      <Typography variant=\"h2\">Tes PIAF suivantes</Typography>\n      <List>\n        {piafs?.length ? (\n          piafs.map((piaf) => <UpcomingPiaf piaf={piaf} key={piaf.id} />)\n        ) : (\n          <p>Aucune PIAF à venir. Inscris-toi sur le planning !</p>\n        )}\n      </List>\n    </Box>\n  )\n}\n\nexport default UpcomingPiafs\n","import { FormEvent, ChangeEvent, useState } from \"react\"\nimport { Button, Dialog, TextField, DialogContent, DialogActions, IconButton, DialogTitle } from \"@material-ui/core\"\nimport { Close } from \"@material-ui/icons\"\nimport styled from \"@emotion/styled/macro\"\n\nimport { useDialog } from \"src/providers/dialog\"\nimport { sendEmail } from \"src/helpers/request\"\nimport { handleError } from \"src/helpers/errors\"\nimport { User } from \"src/types/model\"\n\nconst CloseButton = styled(IconButton)`\n  position: absolute;\n  right: 8px;\n  top: 8px;\n`\n\nconst TextInput = styled(TextField)`\n  width: 100%;\n`\n\nconst Title = styled(DialogTitle)`\n  margin-right: 32px;\n`\n\ninterface Props {\n  show: boolean\n  user: User\n  handleClose: () => void\n  title: string\n  dialogContent: string | null\n  emailAddress: string\n  emailSubject: string\n  callback?: (ok: boolean) => void\n}\n\nconst SendEmail = ({ show, handleClose, user, title, dialogContent, emailAddress, emailSubject, callback }: Props) => {\n  const { openDialog } = useDialog()\n  const [comment, setComment] = useState<string>(\"\")\n  const [loading, setLoading] = useState(false)\n\n  const handleInputChange = ({ target }: ChangeEvent<HTMLInputElement>) => {\n    setComment(target.value)\n  }\n\n  const handleSendEmail = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n\n    setLoading(true)\n\n    try {\n      const content = [\n        `Prénom NOM : ${user.prenom}  ${user.nom.toUpperCase()}`,\n        `Mail : ${user.email} `,\n        `Téléphone : ${user.telephone} `,\n        `Code-barres : ${user.codeBarre}`,\n        `Commentaire : ${comment}`,\n      ]\n\n      await sendEmail(emailAddress, emailSubject, content.join(\"<br />\"))\n        .then(() => {\n          handleClose()\n          openDialog(`Un e-mail a été envoyé a ${emailAddress} qui te recontactera si besoin.`)\n          if (callback) {\n            setTimeout(callback, 300)\n          }\n        })\n        .catch(() => {\n          handleClose()\n          openDialog(\n            \"L'e-mail n'a pas pu être envoyé. S'il te plaît déconnecte toi puis reconnecte toi au site et essaye à nouveau\"\n          )\n        })\n    } catch (error) {\n      handleError(error as Error)\n    }\n\n    setLoading(false)\n  }\n\n  return (\n    <Dialog open={show} onClose={handleClose} title={title}>\n      <form onSubmit={handleSendEmail} autoComplete=\"off\">\n        <CloseButton onClick={handleClose}>\n          <Close />\n        </CloseButton>\n        <Title>{title}</Title>\n        <DialogContent>\n          {dialogContent && <div>{dialogContent}</div>}\n          <TextInput\n            name=\"comment\"\n            multiline\n            required={false}\n            label=\"Commentaire\"\n            value={comment}\n            onChange={handleInputChange}\n          ></TextInput>\n        </DialogContent>\n        <DialogActions>\n          <Button type=\"submit\" color=\"primary\" variant=\"contained\" disabled={loading}>\n            Confirmer\n          </Button>\n        </DialogActions>\n      </form>\n    </Dialog>\n  )\n}\n\nexport default SendEmail\n","export const MAIL_COMMISSION_PARTICIPATION = \"commission_participation_lcc@framalistes.org\"\n","import type { User } from \"src/types/model\"\n\nimport styled from \"@emotion/styled/macro\"\nimport { Box, Grid, Typography, Button } from \"@material-ui/core\"\nimport { useQuery } from \"@apollo/client\"\nimport { useParams } from \"react-router\"\nimport { useState } from \"react\"\n\nimport { USER_BY_CODE, USER_UPDATE_STOP_ABSENCE, USER_SET_AWAITING_PARTICIPATION_GROUP } from \"src/queries\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport BackButton from \"src/components/BackButton\"\nimport Loading from \"src/components/Loading\"\nimport ActivePiafs from \"src/components/ActivePiafs\"\nimport UpcomingPiafs from \"src/components/UpcomingPiafs\"\nimport SendEmail from \"src/components/SendEmail\"\n\nimport apollo from \"src/helpers/apollo\"\nimport { handleError } from \"src/helpers/errors\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { MAIL_COMMISSION_PARTICIPATION } from \"src/utils/constants\"\n\n// https://style.lachouettecoop.fr/#/couleurs\n// TODO: use constants\n// https://github.com/lachouettecoop/chouette-admin-chouettos/blob/master/src/Controller/PlanningController.php#L99-L105\nconst COLORS: Record<string, string> = {\n  \"très chouette\": \"#2ECC40\",\n  chouette: \"#FF851B\",\n  \"chouette en alerte\": \"#FF4136\",\n}\n\nconst StatusText = styled(Typography)<{ $status?: string }>`\n  color: ${({ $status, theme }) => ($status && COLORS[$status.toLowerCase()]) || theme.palette.secondary.main};\n  &::first-letter {\n    text-transform: uppercase;\n  }\n`\nconst Status = styled(Grid)`\n  h3 {\n    span {\n      font-size: 0.5em;\n    }\n  }\n`\nconst AbsenceText = styled(Typography)`\n  color: red;\n`\n\ninterface Params {\n  code: string\n}\n\ninterface Results {\n  users: User[]\n}\n\nconst UserPage = () => {\n  const { code } = useParams<Params>()\n  const { openQuestion } = useDialog()\n  const [openSendEmailDialog, setOpenSendEmailDialog] = useState(false)\n\n  const { loading, error, data } = useQuery<Results>(USER_BY_CODE, { variables: { code } })\n\n  if (loading) {\n    return <Loading />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data || !data.users.length) {\n    return null\n  }\n\n  const user = data.users[0]\n  const {\n    enabled,\n    id,\n    prenom,\n    nom,\n    statut,\n    nbPiafEffectuees,\n    nbPiafAttendues,\n    absenceLongueDureeSansCourses,\n    attenteCommissionParticipation,\n  } = user\n  const nbPiafs = user?.nbDemiPiaf ? nbPiafEffectuees + 0.5 : nbPiafEffectuees\n\n  const handleClick = async () => {\n    const ok = await openQuestion(\n      \"Tu souhaites revenir faire tes PIAF et tes courses ? Super ! Confirme-le ici et l'effet sera immédiat. Pense à te rendre sur le planning pour t’inscrire à nouveau sur des créneaux de PIAF.\"\n    )\n    if (!ok) {\n      return\n    }\n    try {\n      await apollo.mutate({ mutation: USER_UPDATE_STOP_ABSENCE, variables: { id: id } })\n    } catch (errorUpdate) {\n      handleError(errorUpdate as Error)\n    }\n  }\n\n  const handleCloseSendEmailDialog = () => {\n    setOpenSendEmailDialog(false)\n  }\n\n  const handleOpenSendEmailDialog = () => {\n    setOpenSendEmailDialog(true)\n  }\n\n  const setUserAsAwaitingResult = async () => {\n    await apollo.mutate({ mutation: USER_SET_AWAITING_PARTICIPATION_GROUP, variables: { id: id } })\n  }\n\n  return (\n    <>\n      {!openSendEmailDialog && <BackButton />}\n      <Box my={4}>\n        <Typography variant=\"h2\" align=\"center\">\n          {prenom} {nom}\n        </Typography>\n      </Box>\n      {enabled ? (\n        <Grid container spacing={2}>\n          <Status item xs={12} md={6}>\n            {!absenceLongueDureeSansCourses && (\n              <>\n                <Typography variant=\"h2\">Je suis</Typography>\n                {!attenteCommissionParticipation && (\n                  <StatusText variant=\"h3\" $status={statut}>\n                    {statut}\n                  </StatusText>\n                )}\n                {attenteCommissionParticipation && (\n                  <StatusText variant=\"h2\" $status={statut}>\n                    {\"en attente de la décision de la commission de participation et je peux faire mes courses\"}\n                  </StatusText>\n                )}\n              </>\n            )}\n            {!attenteCommissionParticipation && (\n              <Typography variant=\"h3\">\n                {nbPiafs}/{nbPiafAttendues} <span>PIAF attendues</span>\n              </Typography>\n            )}\n            <Box>\n              {absenceLongueDureeSansCourses && (\n                <>\n                  <AbsenceText variant=\"h5\">\n                    Actuellement en pause de PIAF, pour pouvoir faire des courses, je dois cliquer sur le bouton\n                    ci-dessous\n                  </AbsenceText>\n                  <Button variant=\"contained\" color=\"primary\" size=\"large\" onClick={handleClick}>\n                    Je reprends ma participation\n                  </Button>\n                </>\n              )}\n            </Box>\n            {MAIL_COMMISSION_PARTICIPATION &&\n              !user?.attenteCommissionParticipation &&\n              user?.statut.toLowerCase() == \"chouette en alerte\" && (\n                <>\n                  <Typography>\n                    Ce statut t’empêche de faire des courses. Si tu souhaites revenir faire tes courses et PIAF, tu peux\n                    saisir la commission participation qui examine les cas particuliers et recherche des solutions. Pour\n                    joindre la commission, tu peux cliquer sur le bouton ci-dessous\n                  </Typography>\n                  <Button variant=\"contained\" color=\"primary\" size=\"large\" onClick={handleOpenSendEmailDialog}>\n                    joindre la commission\n                  </Button>\n                </>\n              )}\n          </Status>\n          <Grid item xs={12} md={6}>\n            <ActivePiafs userId={id} />\n            <UpcomingPiafs userId={id} />\n          </Grid>\n          {user && MAIL_COMMISSION_PARTICIPATION && (\n            <SendEmail\n              show={openSendEmailDialog}\n              handleClose={handleCloseSendEmailDialog}\n              user={user}\n              title=\"Si tu confirmes ton souhait, la commission recevra un mail et prendra contact avec toi. Ton statut sera mis en attente de la décision de la commission. En attendant, tu pourras faire tes courses.\"\n              dialogContent=\"Tu peux laisser un commentaire si tu le souhaites.\"\n              emailAddress={MAIL_COMMISSION_PARTICIPATION}\n              emailSubject={`Saisie commission participation ${user.prenom} ${user.nom}`}\n              callback={setUserAsAwaitingResult}\n            />\n          )}\n        </Grid>\n      ) : (\n        <Typography align=\"center\">Utilisateur non activé</Typography>\n      )}\n    </>\n  )\n}\n\nexport default UserPage\n","import { Redirect, Route, Switch, useLocation } from \"react-router-dom\"\nimport { Container } from \"@material-ui/core\"\n\nimport { getParams } from \"src/helpers/request\"\n\nimport HomePage from \"src/pages/authenticated/Home\"\nimport UserPage from \"src/pages/authenticated/User\"\n\nconst Authenticated = () => {\n  const { search } = useLocation()\n  const { next } = getParams(search)\n\n  return (\n    <Container>\n      <Switch>\n        <Route path=\"/home\">\n          <HomePage />\n        </Route>\n        <Route path=\"/user/:code\">\n          <UserPage />\n        </Route>\n        <Redirect to={next || \"/home\"} />\n      </Switch>\n    </Container>\n  )\n}\n\nexport default Authenticated\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M61.585 422.116v58.818h22.67v14.24H44.713v-73.058zM135.514 468.447l-8.98-24.533-9.093 24.533zm4.6 12.924h-27.6l-5.585 13.803H89.402l29.464-73.058h15.446l28.808 73.058h-17.527z\",\n  fill: \"#314b3f\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"matrix(1.33333 0 0 -1.33333 0 756)\",\n  fill: \"#314b3f\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M187.233 197.273c-4.847-2.463-8.789-2.955-12.075-2.955-10.106 0-16.922 3.45-21.524 7.966-4.927 4.765-8.543 11.994-8.543 20.786 0 8.626 3.616 15.854 8.543 20.62 4.847 4.681 11.913 7.884 20.454 7.884 3.616 0 7.805-.739 13.145-3.04v-14.62c-2.793 2.956-6.98 5.83-12.814 5.83-4.6 0-8.298-1.48-11.17-4.27-3.042-2.959-5.178-7.393-5.178-12.652 0-5.666 2.3-9.693 4.764-12.076 1.152-1.148 5.093-4.599 11.83-4.599 3.287 0 7.721.902 12.568 5.668zM209.99 229.476h21.85v20.866h12.651v-54.793H231.84v23.248h-21.85v-23.248h-12.653v54.793h12.653zM271.76 235.23c-2.38-2.301-4.846-6.326-4.846-12.407 0-5.012 1.643-9.037 5.01-12.323 3.533-3.367 7.479-4.519 11.748-4.519 5.586 0 9.529 2.054 12.159 4.684 2.134 2.052 4.766 5.914 4.766 12.241 0 5.667-2.301 9.855-4.766 12.323-2.71 2.627-7.066 4.681-12.077 4.681-4.764 0-9.036-1.726-11.993-4.68m33.269 8.376c5.175-5.012 8.544-12.239 8.544-20.7 0-7.313-2.626-14.788-8.544-20.537-5.093-4.932-11.993-8.05-21.193-8.05-10.27 0-17.25 4.107-21.358 8.05-5.258 4.928-8.544 12.322-8.544 20.37 0 7.888 3.53 15.855 8.46 20.783 3.699 3.7 10.515 8.052 21.442 8.052 8.544 0 15.69-2.628 21.193-7.968M369.353 217.894c0-5.258-.657-11.747-6.08-17.333-5.259-5.422-11.335-6.243-17.085-6.243-5.752 0-11.83.821-17.087 6.243-5.424 5.586-6.081 12.075-6.081 17.333v32.447h12.654v-32.12c0-2.38.163-6.406 2.873-9.2 2.217-2.38 5.257-2.873 7.641-2.873 2.38 0 5.42.493 7.638 2.873 2.711 2.795 2.876 6.82 2.876 9.2v32.12h12.651zM412.315 239.664h-18.317v-10.598h17.415v-10.678h-17.415v-12.16h18.317V195.55h-30.97v54.793h30.97zM441.807 239.664V195.55h-12.65v44.115h-11.913v10.678h36.475v-10.678zM483.862 239.664V195.55h-12.649v44.115H459.3v10.678h36.476v-10.678zM533.396 239.664h-18.315v-10.598h17.413v-10.678h-17.413v-12.16h18.315V195.55H502.43v54.793h30.967zM150.376 147.294h14.159v-6.497h-14.159zM216.303 142.846v-6.907s.07-10.871-9.847-10.871c-9.913 0-9.844 10.87-9.844 10.87v29.614s-.07 10.87 9.844 10.87c9.917 0 9.847-10.87 9.847-10.87v-6.91H209.4v6.91s.27 3.69-2.806 3.69c-2.6 0-2.6-3.69-2.6-3.69v-29.613s0-3.691 2.6-3.691c3.077 0 2.806 3.69 2.806 3.69v6.908zM257.48 169.241c-2.598 0-2.462-3.689-2.462-3.689v-29.614s-.136-3.69 2.461-3.69c2.6 0 2.465 3.69 2.465 3.69v29.614s.135 3.69-2.465 3.69m0-44.175c-9.916 0-9.845 10.871-9.845 10.871v29.614s-.07 10.871 9.845 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M309.045 169.241c-2.598 0-2.461-3.689-2.461-3.689v-29.614s-.137-3.69 2.46-3.69c2.599 0 2.466 3.69 2.466 3.69v29.614s.133 3.69-2.465 3.69m0-44.175c-9.913 0-9.847 10.871-9.847 10.871v29.614s-.066 10.871 9.847 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M358.63 153.24c4.65 0 5.54 1.71 5.54 7.32 0 5.607-.89 7.792-5.54 7.792zm-7.385 22.635h7.385c6.43 0 12.993-3.488 12.993-15.044 0-11.556-6.563-15.113-12.993-15.113v-20.103h-7.385zM402.399 147.294h14.157v-6.497h-14.157zM281.567 382.087a.789.789 0 011.375 0l3.075 5.445a.79.79 0 01-.13.947l-3.073 3.075a.792.792 0 01-1.118 0l-3.074-3.075a.79.79 0 01-.129-.947zM304.03 401.252a3.2 3.2 0 003.195-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308-8.307-3.727-8.307-8.308c0-4.58 3.725-8.308 8.307-8.308M261.852 401.252a3.2 3.2 0 003.196-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308c-4.581 0-8.31-3.727-8.31-8.308 0-4.58 3.729-8.308 8.31-8.308\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M326.169 356.778c-4.608-20.494-16.665-32.974-22.36-38.441a76.7 76.7 0 013.984 12.545c1.569 6.95 2.219 13.674 1.985 20.554-.006.193-.035.38-.077.562a49.412 49.412 0 0118.185 22.554c.139-6.01-.418-11.997-1.717-17.774m-55.152-11.866a48.987 48.987 0 0111.239-1.313c7.694 0 14.98 1.783 21.47 4.949a74.272 74.272 0 00-1.845-16.332c-2.415-10.696-6.664-18.27-9.76-23.135-8.12-5.194-19.32-10.255-34.45-13.325 9.88 15.04 14.362 31.548 13.346 49.156m-30.591-61.684v83.767a49.396 49.396 0 0123.956-20.015c1.587-17.966-2.98-34.741-13.59-49.862l-1.18-1.684c-3.438-4.91-6.265-8.95-9.186-12.206m4.686 132.08c.35.404.703.81 1.114 1.183 1.183 1.212 2.607 2.275 4.11 3.266 1.56.914 3.226 1.714 5.002 2.268.44.145.9.223 1.35.342.46.13.894.204 1.312.256.455.05.778.169 1.34.184l1.616.075.123.008.024-.001.087-.005.348-.018.697-.032c.469 0 .93-.052 1.386-.14.925-.104 1.82-.328 2.714-.555 1.756-.552 3.44-1.283 4.967-2.228 1.483-.994 2.91-2.048 4.054-3.293.633-.568 1.087-1.26 1.647-1.848.465-.652.964-1.27 1.359-1.913.79-1.29 1.453-2.541 1.957-3.704.237-.593.456-1.148.66-1.662l.458-1.447c.305-.878.412-1.653.549-2.141.128-.5.194-.766.194-.766l.194.77c.14.498.243 1.233.55 2.125.14.443.295.934.462 1.468.223.517.429 1.077.662 1.665a30.81 30.81 0 001.966 3.71c.4.642.895 1.263 1.366 1.913.56.59 1.013 1.284 1.653 1.85 1.14 1.249 2.578 2.3 4.066 3.29 1.524.955 3.22 1.67 4.979 2.223l1.348.33c.448.106.854.127 1.28.21l.643.106.808.037.809.037.382.018.064-.005.174-.01c1.877.002 3.73-.371 5.525-.87 1.788-.543 3.459-1.364 5.03-2.27 1.519-.985 2.95-2.05 4.152-3.255.397-.355.74-.744 1.079-1.13a43.206 43.206 0 006.362-22.618c0-23.974-19.505-43.48-43.478-43.48-19.874 0-43.48 15.249-43.48 43.48a43.22 43.22 0 006.336 22.577m37.144 20.9c9.559 0 18.403-3.107 25.588-8.357-1.364.293-2.761.48-4.175.502l-.23.01-.115.006-.248-.011-.405-.024-.808-.05-.808-.05-.954-.143c-.63-.112-1.302-.188-1.887-.36l-1.743-.513c-2.272-.8-4.373-1.928-6.164-3.311-1.756-1.418-3.315-2.953-4.458-4.643-.626-.8-1.07-1.694-1.558-2.5-.396-.864-.798-1.681-1.101-2.497a20.82 20.82 0 01-1.012-3.644 20.73 20.73 0 01-1.004 3.618c-.297.815-.704 1.627-1.093 2.492-.485.806-.932 1.693-1.552 2.496-1.141 1.684-2.684 3.223-4.433 4.642-1.786 1.38-3.876 2.513-6.14 3.324-1.148.348-2.31.717-3.525.869-.6.117-1.204.193-1.818.212l-.916.055-.458.026-.115.005-.058.004h-.03l-.17-.004-.201-.01-1.615-.095c-.515-.02-1.243-.171-1.85-.26-.15-.022-.29-.052-.436-.077 7.168 5.207 15.974 8.289 25.492 8.289m49.13-43.478c0 27.09-22.04 49.13-49.13 49.13-27.092 0-48.717-22.04-48.717-49.13V275.847c0-1.223 1.104-2.34 2.195-2.89a3.235 3.235 0 013.38.288c5.23 3.866 9.072 8.927 13.832 15.678.03.004.06.002.092.007 18.943 3.025 32.639 9.04 42.319 15.244.488.16 8.738 6.323 11.397 8.845 4.905 4.647 19.83 18.792 25.153 42.468 2.653 11.798-.52 37.129-.52 37.244\"\n}));\n\nfunction SvgLogoWhite(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 756,\n    height: 756,\n    viewBox: \"0 0 756 756\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogoWhite);\nexport default __webpack_public_path__ + \"static/media/logo_white.6e9fcd91.svg\";\nexport { ForwardRef as ReactComponent };","import styled from \"@emotion/styled/macro\"\nimport { useDialog } from \"src/providers/dialog\"\nimport Alert from \"@material-ui/lab/Alert\"\nimport { Button } from \"@material-ui/core\"\nimport { useUser } from \"src/providers/user\"\n\nimport { Home } from \"@material-ui/icons\"\n\nconst LogoutWrapper = styled.div`\n  display: flex;\n  flex-direction: row-reverse;\n  justify-content: space-between;\n`\n\nconst StyledButton = styled(Button)`\n  margin: 20px;\n`\n\nconst AlertAccount = styled(Alert)`\n  align-items: center;\n`\n\ninterface Props {\n  iframeSrc: any\n  setIframeSrc: any\n}\n\nconst Logout = ({ iframeSrc, setIframeSrc }: Props) => {\n  const { logout, auth } = useUser()\n  const { openQuestion } = useDialog()\n\n  const confirmLogout = async () => {\n    const ok = await openQuestion(\"Es-tu sûr·e de vouloir fermer la session ?\")\n    if (ok) {\n      logout()\n    }\n  }\n\n  if (!auth) {\n    return null\n  }\n\n  return (\n    <LogoutWrapper>\n      {\n        <StyledButton disabled={!!iframeSrc.label} onClick={confirmLogout}>\n          Déconnexion\n        </StyledButton>\n      }\n      {iframeSrc.label && (\n        <StyledButton\n          startIcon={<Home />}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() => {\n            setIframeSrc({ label: \"\", url: \"\" })\n            document.getElementById(\"codeInput\")?.focus()\n          }}\n        >\n          Quitter {iframeSrc.label} et revenir à Participation\n        </StyledButton>\n      )}\n      {window.localStorage.lcc_defaultLogin && window.localStorage.lcc_defaultLogin !== auth?.user.email && (\n        <AlertAccount severity=\"warning\">Vous n&apos;êtes pas connecté avec le compte par défaut</AlertAccount>\n      )}\n    </LogoutWrapper>\n  )\n}\n\nexport default Logout\n","import { BrowserRouter } from \"react-router-dom\"\nimport styled from \"@emotion/styled/macro\"\nimport { Button, Typography } from \"@material-ui/core\"\n\nimport { DialogProvider } from \"src/providers/dialog\"\nimport { useUser } from \"src/providers/user\"\nimport Anonymous from \"src/pages/anonymous\"\nimport Authenticated from \"src/pages/authenticated\"\nimport { Assignment, CalendarToday, Chat, SwapHoriz } from \"@material-ui/icons\"\n\nimport { ReactComponent as Logo } from \"src/images/logo_white.svg\"\nimport { useState } from \"react\"\nimport Logout from \"./components/Logout\"\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  svg {\n    width: 250px;\n    height: 250px;\n    margin: -20px 0;\n  }\n`\nconst Menu = styled.div`\n  display: flex;\n  margin-bottom: 10px;\n  svg {\n    width: 50px;\n    height: 50px;\n    margin: 0;\n  }\n`\n\nconst MenuItemButton = styled(Button)`\n  display: flex;\n  align-items: center;\n  span {\n    flex-direction: column;\n  }\n`\n\nconst IFrame = styled.div`\n  position: fixed;\n  top: 100px;\n  width: 100vw;\n  height: calc(100vh - 100px);\n  z-index: 100;\n`\n\nconst App = () => {\n  const [iframeSrc, setIframeSrc] = useState({ label: \"\", url: \"\" })\n\n  const { auth } = useUser()\n\n  return (\n    <BrowserRouter>\n      <DialogProvider>\n        <Logout iframeSrc={iframeSrc} setIframeSrc={setIframeSrc} />\n        <Header>\n          <Logo />\n          {auth && (\n            <Menu>\n              <MenuItemButton\n                onClick={() => {\n                  setIframeSrc({ url: `https://planning.lachouettecoop.fr?random=${Date.now()}`, label: \"Planning\" })\n                }}\n              >\n                <CalendarToday color=\"primary\" fontSize=\"small\" /> Planning\n              </MenuItemButton>\n              <MenuItemButton\n                onClick={() =>\n                  setIframeSrc({\n                    url: `https://framaforms.org/inscription-reunions-daccueil-la-chouette-coop-1556050737?random=${Date.now()}`,\n                    label: \"Réunion d'accueil\",\n                  })\n                }\n              >\n                <Assignment color=\"primary\" fontSize=\"small\" /> Réunion d&apos;accueil\n              </MenuItemButton>\n              <MenuItemButton\n                onClick={() =>\n                  setIframeSrc({\n                    url: `https://framaforms.org/inscription-periode-dessai-la-chouette-coop-1675259293?random=${Date.now()}`,\n                    label: \"Période d'essai\",\n                  })\n                }\n              >\n                <SwapHoriz color=\"primary\" fontSize=\"small\" /> Période d&apos;essai\n              </MenuItemButton>\n              <MenuItemButton\n                onClick={() =>\n                  setIframeSrc({\n                    url:\n                      \"https://docs.google.com/forms/d/e/1FAIpQLSezjphy6KurmbI-2P2-FC9DTXsnGPzO_Om87knU7Ykfd9Sbqw/viewform\",\n                    label: \"Demande Produit\",\n                  })\n                }\n              >\n                <Chat color=\"primary\" fontSize=\"small\" /> Demande Produit\n              </MenuItemButton>\n            </Menu>\n          )}\n          <Typography variant=\"h1\">Participation</Typography>\n        </Header>\n        {auth ? <Authenticated /> : <Anonymous />}\n      </DialogProvider>\n      {auth && iframeSrc.url && (\n        <IFrame>\n          <iframe src={iframeSrc.url} style={{ borderStyle: \"none\", width: \"100%\", height: \"100%\" }} />\n        </IFrame>\n      )}\n    </BrowserRouter>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { ApolloProvider } from \"@apollo/client\"\n\nimport { ErrorBoundary } from \"src/helpers/errors\"\nimport apollo from \"src/helpers/apollo\"\nimport { UserProvider } from \"src/providers/user\"\nimport ThemeProvider from \"src/providers/theme\"\nimport App from \"src/App\"\n\nReactDOM.render(\n  <ErrorBoundary>\n    <React.StrictMode>\n      <ThemeProvider>\n        <ApolloProvider client={apollo}>\n          <UserProvider>\n            <App />\n          </UserProvider>\n        </ApolloProvider>\n      </ThemeProvider>\n    </React.StrictMode>\n  </ErrorBoundary>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}