(this["webpackJsonp@lachouettecoop/participation"]=this["webpackJsonp@lachouettecoop/participation"]||[]).push([[0],{178:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),i=n(20),o=n.n(i),s=n(24),l=n(18),u=n(99),d=n.n(u),j=n(132),b=n.n(j),m=n(72),p=n(3);var h="c41544e65bf2e5cd77d7d9dcc49aa9c5";d.a.start({apiKey:h,releaseStage:"production",enabledReleaseStages:["production"],appVersion:"15508e1ecc2e8004785540607cce7be7a2e613cf",metadata:{deployDate:(new Date).toString(),deployAuthor:"SilviaAC"},plugins:[new b.a]});var f,v,O,x,g,y,w,S=function(e){console.error(e),alert(e.message),d.a.notify(e)},C=null===(r=d.a.getPlugin("react"))||void 0===r?void 0:r.createErrorBoundary(c.a),k=Object(l.a)("div",{target:"e1npbp3o1"})({name:"10i3u6",styles:"padding:1rem;h2{color:#e53935;margin:1rem 0;}code{display:block;margin-top:3rem;color:#aaa;}"}),I=function(e){var t=e.error;return Object(p.jsxs)(k,{children:[Object(p.jsxs)(m.a,{variant:"h2",children:[Object(p.jsx)("span",{"aria-hidden":!0,children:"\ud83d\udc1e"}),Object(p.jsx)("br",{}),"Une erreur est survenue"]}),Object(p.jsx)(m.a,{children:"Essayez de recharger la page"}),Object(p.jsx)("code",{children:String(t)})]})},P=Object(l.a)("p",{target:"e1npbp3o0"})({name:"1nm0ewq",styles:"color:#e53935"}),z=function(e){var t=e.error;return Object(p.jsxs)(P,{children:["Erreur : ",t.message]})},F=function(e){var t=e.children;return C?Object(p.jsx)(C,{FallbackComponent:I,children:t}):Object(p.jsx)(p.Fragment,{children:t})},M=n(80),q=n(137),D=n(15),E=n.n(D),$=n(27),A=n(23),T=n(61),L=Object(s.gql)(f||(f=Object(T.a)(["\n  query($id: ID!) {\n    user(id: $id) {\n      id\n      enabled\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      codeBarre\n    }\n  }\n"]))),H=Object(s.gql)(v||(v=Object(T.a)(["\n  query($code: String!) {\n    users(codeBarre: $code) {\n      id\n      enabled\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      telephone\n      statut\n      nbPiafEffectuees\n      nbPiafAttendues\n      absenceLongueDureeSansCourses\n      codeBarre\n      attenteCommissionParticipation\n      nbDemiPiaf\n    }\n  }\n"]))),U=Object(s.gql)(O||(O=Object(T.a)(["\n  query($lastname: String, $firstname: String) {\n    users(nom: $lastname, prenom: $firstname) {\n      id\n      codeBarre\n      enabled\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n    }\n  }\n"]))),W=Object(s.gql)(x||(x=Object(T.a)(["\n  query PIAFS($userId: String, $after: String, $before: String, $statut: String) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }, statut: $statut) {\n      id\n      statut\n      pourvu\n      creneau {\n        id\n        titre\n        debut\n        fin\n      }\n      piaffeur {\n        id\n        prenom\n        nom\n        username\n      }\n      role {\n        id\n        roleUniqueId\n        libelle\n      }\n    }\n  }\n"]))),B=Object(s.gql)(g||(g=Object(T.a)(["\n  mutation($id: ID!) {\n    updatePiaf(input: { id: $id, pourvu: true }) {\n      piaf {\n        id\n        pourvu\n      }\n      clientMutationId\n    }\n  }\n"]))),_=Object(s.gql)(y||(y=Object(T.a)(["\n  mutation($id: ID!) {\n    updateUser(input: { id: $id, absenceLongueDureeSansCourses: false }) {\n      user {\n        id\n        username\n        nom\n        prenom\n        absenceLongueDureeSansCourses\n      }\n    }\n  }\n"]))),V=Object(s.gql)(w||(w=Object(T.a)(["\n  mutation($id: ID!) {\n    updateUser(input: { id: $id, attenteCommissionParticipation: true }) {\n      user {\n        id\n        username\n        nom\n        prenom\n        attenteCommissionParticipation\n      }\n    }\n  }\n"]))),Q=Object(a.createContext)({}),R="auth",G=function(){var e=localStorage.getItem(R);return e?JSON.parse(e):null},J=function(e){var t=e.children,n=Object(a.useState)(G),r=Object(A.a)(n,2),c=r[0],i=r[1],o=function(){var e=Object($.a)(E.a.mark((function e(t){var n,r,a,c,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.token,e.next=3,Y.query({query:L,variables:{id:"api/users/".concat(n)}});case 3:if(a=e.sent,(c=a.data.user).rolesChouette.find((function(e){return"GH"===e.roleUniqueId}))){e.next=8;break}return alert("".concat(c.prenom,", tu n\u2019es pas Grand Hibou")),e.abrupt("return");case 8:i(o={token:r,user:c}),localStorage.setItem(R,JSON.stringify(o));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(Q.Provider,{value:{auth:c,login:o,logout:function(){i(null),localStorage.removeItem(R)}},children:t})};function N(){return Object(a.useContext)(Q)}var K=Object(s.createHttpLink)({uri:"".concat("https://adminchouettos.lachouettecoop.fr","/api/graphql")}),X=Object(q.a)((function(e,t){var n=G();return n?Object(M.a)(Object(M.a)({},t),{},{headers:Object(M.a)(Object(M.a)({},t.headers),{},{"X-Auth-Token":n.token})}):t})),Y=new s.ApolloClient({link:X.concat(K),cache:new s.InMemoryCache}),Z=n(143),ee=n(207),te=n(208),ne=n(100),re=n(234),ae="Montserrat, sans-serif",ce="Cabin, sans-serif",ie=ne.a[500],oe=Object(Z.a)({typography:{fontFamily:ce,body1:{fontFamily:ce,fontSize:"1rem"},body2:{fontFamily:ce,fontSize:"1rem"},subtitle1:{fontFamily:ae},subtitle2:{fontFamily:ae},h1:{fontFamily:ae,fontWeight:600,fontSize:"2.5rem"},h2:{fontFamily:ae,fontWeight:600,fontSize:"1.5rem"},h3:{fontFamily:ae,fontWeight:500},h4:{fontFamily:ae},h5:{fontFamily:ae},h6:{fontFamily:ae}},palette:{primary:{main:"#3A5447"},secondary:{main:ie},contrastThreshold:3,tonalOffset:.2}}),se=function(e){var t=e.children;return Object(p.jsx)(re.b,{theme:oe,children:Object(p.jsxs)(ee.a,{theme:oe,children:[Object(p.jsx)(te.a,{}),t]})})},le=n(62),ue=n(214),de=n(237),je=n(210),be=n(211),me=n(212),pe=n(213),he=function(e){var t=e.open,n=e.handleClose,r=e.title,a=e.message,c=e.callback,i=function(e){return function(){c&&setTimeout(c,300,e),n()}};return Object(p.jsxs)(de.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(p.jsx)(je.a,{id:"alert-dialog-title",children:r}),Object(p.jsx)(be.a,{children:Object(p.jsx)(me.a,{id:"alert-dialog-description",children:a})}),c?Object(p.jsxs)(pe.a,{children:[Object(p.jsx)(ue.a,{onClick:i(!0),color:"primary",children:"Oui"}),Object(p.jsx)(ue.a,{onClick:i(!1),color:"primary",children:"Non"})]}):Object(p.jsx)(pe.a,{children:Object(p.jsx)(ue.a,{onClick:n,color:"primary",children:"OK"})})]})},fe=Object(a.createContext)({}),ve=function(e){var t=e.children,n=Object(a.useState)(!1),r=Object(A.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(""),s=Object(A.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)(""),j=Object(A.a)(d,2),b=j[0],m=j[1],h=Object(a.useState)(),f=Object(A.a)(h,2),v=f[0],O=f[1],x=function(){i(!1)};return Object(p.jsxs)(fe.Provider,{value:{openDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";m(e),u(t),O(void 0),i(!0)},openQuestion:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return m(e),u(t),new Promise((function(e){O((function(){return e})),i(!0)}))},closeDialog:x},children:[t,Object(p.jsx)(he,{open:c,handleClose:x,title:l,message:b,callback:v})]})},Oe=function(){return Object(a.useContext)(fe)},xe=n(21),ge=n(215),ye=n(230),we=n(142),Se=n.n(we),Ce=function(){var e=Object($.a)(E.a.mark((function e(t,n,r){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://adminchouettos.lachouettecoop.fr","/").concat(t),{method:"POST",body:n,headers:r});case 2:if((a=e.sent).ok){e.next=5;break}throw new Se.a(a.status,a.statusText);case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ke=function(){var e=Object($.a)(E.a.mark((function e(t,n,r){var a,c,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=G()){e.next=3;break}throw new Error("You must be authenticated to trigger the sending of an email");case 3:return c={"X-Auth-Token":a.token},(i=new FormData).append("sujet",n),i.append("email",t),i.append("corps",r),e.next=10,Ce("dist_api/send_email",i,c);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(a.useState)(!1),t=Object(A.a)(e,2),n=t[0],r=t[1],c=N().login,i=function(){var e=Object($.a)(E.a.mark((function e(t){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(t.currentTarget),r(!0),e.prev=3,e.next=6,Ce("login_api",n);case 6:return a=e.sent,e.next=9,c(a);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),S(e.t0);case 14:r(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(ge.a,{maxWidth:"xs",children:Object(p.jsxs)("form",{onSubmit:i,children:[Object(p.jsx)("p",{children:"Cette application permet de g\xe9rer l\u2019accueil du magasin. Il faut \xeatre Grand Hibou pour se connecter."}),Object(p.jsx)(ye.a,{type:"email",name:"username",defaultValue:window.localStorage.lcc_defaultLogin||"",label:"E-mail",fullWidth:!0,variant:"outlined"}),Object(p.jsx)(ye.a,{type:"password",name:"password",defaultValue:window.localStorage.lcc_defaultPassword||"",label:"Mot de passe",fullWidth:!0,variant:"outlined",margin:"normal"}),Object(p.jsx)(ue.a,{type:"submit",fullWidth:!0,size:"large",variant:"contained",color:"primary",disabled:n,children:"Connexion"})]})})},Pe=function(){var e=Object(xe.h)().pathname;return Object(p.jsx)(ge.a,{children:Object(p.jsxs)(xe.d,{children:[Object(p.jsx)(xe.b,{path:"/login",children:Object(p.jsx)(Ie,{})}),Object(p.jsx)(xe.a,{to:"/login?next=".concat(e)})]})})},ze=n(216),Fe=n(217),Me=n(218),qe=Object(l.a)("div",{target:"e199htu20"})(">div{margin-bottom:",(function(e){return e.theme.spacing(1)}),"px;}@media (min-width: 470px){display:flex;>div{flex:1;&:first-of-type{margin-right:",(function(e){return e.theme.spacing(1)}),"px;}}}"),De=function(){var e=N().auth,t=Object(xe.g)().push,n=Object(s.useLazyQuery)(U),r=Object(A.a)(n,2),c=r[0],i=r[1],o=i.loading,l=i.error,u=i.data;Object(a.useEffect)((function(){window.scrollTo({top:document.body.scrollHeight,behavior:"auto"})}),[u]);var d=function(){var e=Object($.a)(E.a.mark((function e(n){var r,a,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r=n.currentTarget.elements,a=r.namedItem("code"),c=a.value,t("/user/"+c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object($.a)(E.a.mark((function e(t){var n,r,a,i,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.currentTarget.elements,r=n.namedItem("lastname"),a=r.value,i=n.namedItem("firstname"),o=i.value,a||o?c({variables:{lastname:a,firstname:o}}):alert("Entrez au moins le d\xe9but du nom ou du pr\xe9nom.");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(ge.a,{maxWidth:"xs",children:[Object(p.jsxs)("p",{children:["Grand Hibou : ",e.user.prenom," ",e.user.nom]}),Object(p.jsxs)("form",{onSubmit:d,children:[Object(p.jsx)(ye.a,{id:"codeInput",name:"code",label:"Code-barres",fullWidth:!0,variant:"outlined",margin:"normal",autoFocus:!0}),Object(p.jsx)(ue.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,size:"large",children:"Valider"})]}),Object(p.jsxs)("form",{onSubmit:j,children:[Object(p.jsx)("p",{children:"Tu peux aussi chercher par nom, mais la ou le chouettos doit pr\xe9senter sa carte de membre :"}),Object(p.jsxs)(qe,{children:[Object(p.jsx)(ye.a,{name:"lastname",label:"Nom",variant:"outlined",fullWidth:!0}),Object(p.jsx)(ye.a,{name:"firstname",label:"Pr\xe9nom",variant:"outlined",fullWidth:!0})]}),Object(p.jsx)(ue.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,size:"large",disabled:o,children:"Rechercher"}),u&&Object(p.jsx)(ze.a,{children:u.users.slice().sort((function(e,t){return e.nom>t.nom?1:-1})).map((function(e){var t=e.id,n=e.codeBarre,r=e.prenom,a=e.nom,c=e.email;return Object(p.jsx)(Fe.a,{button:!0,component:le.b,to:"/user/".concat(n),children:Object(p.jsx)(Me.a,{primary:"".concat(r," ").concat(a),secondary:c})},t)}))}),l&&Object(p.jsx)(z,{error:l})]})]})},Ee=n(224),$e=n(233);var Ae=Object(l.a)(ue.a,{target:"e944q6z0"})({name:"t5qbdk",styles:"position:absolute;top:8px;left:8px"}),Te=function(){var e=Object(a.useState)(30),t=Object(A.a)(e,2),n=t[0],r=t[1],c=Object(xe.g)().goBack;return Object(a.useEffect)((function(){if(!(n<=0)){var e=setTimeout((function(){return r(n-1)}),1e3);return function(){clearTimeout(e)}}c()}),[n,c]),Object(a.useEffect)((function(){var e=function(e){"Escape"===e.key&&c()};return document.addEventListener("keydown",e,!1),function(){document.removeEventListener("keydown",e)}})),Object(p.jsxs)(Ae,{onClick:c,children:["Retour (Echap \u2013 ",n,")"]})},Le=n(219),He=Object(l.a)("div",{target:"elpc1o00"})("height:",(function(e){return e.$height}),"px;display:flex;align-items:center;justify-content:center;"),Ue=function(e){var t=e.height,n=void 0===t?300:t;return Object(p.jsx)(He,{$height:n,children:Object(p.jsx)(Le.a,{})})},We=n(221),Be=n(231),_e=n(144),Ve=function(e,t){return"string"===typeof e&&(e=new Date(e)),Object(Be.a)(e,t,{locale:_e.a})},Qe=function(e){return Ve(e,"HH:mm")},Re=function(e){return Object(Be.a)(e,"yyyy-MM-dd")},Ge=n(220),Je=function(e){var t=e.piaf,n=Object(a.useState)(!1),r=Object(A.a)(n,2),c=r[0],i=r[1],o=function(){var e=Object($.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.prev=1,e.next=4,Y.mutate({mutation:B,variables:{id:t.id}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),S(e.t0);case 9:i(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)($e.a,{marginY:2,children:Object(p.jsxs)(ue.a,{variant:"contained",color:"primary",size:"large",onClick:o,disabled:t.pourvu||c,endIcon:t.pourvu?Object(p.jsx)(Ge.a,{}):null,children:["De ",Qe(t.creneau.debut)," \xe0 ",Qe(t.creneau.fin),"\xa0: ",t.creneau.titre]})})};var Ne=Object(l.a)(m.a,{target:"e7yu4160"})({name:"hwfcu5",styles:"color:red"}),Ke=function(e){var t=e.userId,n=new Date,r=Object(s.useQuery)(W,{variables:{userId:t,after:Re(n),before:Re(Object(We.a)(n,1))}}),a=r.loading,c=r.error,i=r.data;if(a)return Object(p.jsx)(Ue,{height:150});if(c)return Object(p.jsx)(z,{error:c});if(!i||!i.piafs.length)return null;var o=i.piafs.filter((function(e){return"occupe"===e.statut}));return o.length?Object(p.jsxs)($e.a,{mb:4,children:[Object(p.jsx)(m.a,{variant:"h2",children:"Tu es ici pour faire ta PIAF ?"}),Object(p.jsx)("p",{children:"Si oui, clique dessus pour valider ta pr\xe9sence :"}),o.map((function(e){return Object(p.jsx)(Je,{piaf:e},e.id)})),Object(p.jsx)(Ne,{variant:"h6",children:"La PIAF sera comptabilis\xe9e demain"})]}):null},Xe=function(e){var t,n=e.piaf,r=n.creneau.debut,a=n.creneau.fin,c=n.creneau.titre;return Object(p.jsx)(Fe.a,{disableGutters:!0,children:Object(p.jsx)(Me.a,{primary:"".concat((t=r,Ve(t,"EEEE d MMMM"))," de ").concat(Qe(r)," \xe0 ").concat(Qe(a)),secondary:c})})},Ye=function(e,t){return e.creneau.debut>t.creneau.debut?1:-1},Ze=function(e){var t=e.userId,n=new Date,r=Object(s.useQuery)(W,{variables:{userId:t,after:Re(Object(We.a)(n,1))}}),a=r.loading,c=r.error,i=r.data;if(a)return Object(p.jsx)(Ue,{height:150});if(c)return Object(p.jsx)(z,{error:c});var o=null===i||void 0===i?void 0:i.piafs.filter((function(e){return"remplacement"!==e.statut})).sort(Ye);return Object(p.jsxs)($e.a,{mb:4,children:[Object(p.jsx)(m.a,{variant:"h2",children:"Tes PIAF suivantes"}),Object(p.jsx)(ze.a,{children:(null===o||void 0===o?void 0:o.length)?o.map((function(e){return Object(p.jsx)(Xe,{piaf:e},e.id)})):Object(p.jsx)("p",{children:"Aucune PIAF \xe0 venir. Inscris-toi sur le planning !"})})]})},et=n(222),tt=n(223);var nt=Object(l.a)(et.a,{target:"e1n4vgy12"})({name:"vgkzfy",styles:"position:absolute;right:8px;top:8px"}),rt=Object(l.a)(ye.a,{target:"e1n4vgy11"})({name:"1d3w5wq",styles:"width:100%"}),at=Object(l.a)(je.a,{target:"e1n4vgy10"})({name:"d9gf8v",styles:"margin-right:32px"}),ct=function(e){var t=e.show,n=e.handleClose,r=e.user,c=e.title,i=e.dialogContent,o=e.emailAddress,s=e.emailSubject,l=e.callback,u=Oe().openDialog,d=Object(a.useState)(""),j=Object(A.a)(d,2),b=j[0],m=j[1],h=Object(a.useState)(!1),f=Object(A.a)(h,2),v=f[0],O=f[1],x=function(){var e=Object($.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),O(!0),e.prev=2,a=["Pr\xe9nom NOM : ".concat(r.prenom,"  ").concat(r.nom.toUpperCase()),"Mail : ".concat(r.email," "),"T\xe9l\xe9phone : ".concat(r.telephone," "),"Code-barres : ".concat(r.codeBarre),"Commentaire : ".concat(b)],e.next=6,ke(o,s,a.join("<br />")).then((function(){n(),u("Un e-mail a \xe9t\xe9 envoy\xe9 a ".concat(o," qui te recontactera si besoin.")),l&&setTimeout(l,300)})).catch((function(){n(),u("L'e-mail n'a pas pu \xeatre envoy\xe9. S'il te pla\xeet d\xe9connecte toi puis reconnecte toi au site et essaye \xe0 nouveau")}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),S(e.t0);case 11:O(!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(de.a,{open:t,onClose:n,title:c,children:Object(p.jsxs)("form",{onSubmit:x,autoComplete:"off",children:[Object(p.jsx)(nt,{onClick:n,children:Object(p.jsx)(tt.a,{})}),Object(p.jsx)(at,{children:c}),Object(p.jsxs)(be.a,{children:[i&&Object(p.jsx)("div",{children:i}),Object(p.jsx)(rt,{name:"comment",multiline:!0,required:!1,label:"Commentaire",value:b,onChange:function(e){var t=e.target;m(t.value)}})]}),Object(p.jsx)(pe.a,{children:Object(p.jsx)(ue.a,{type:"submit",color:"primary",variant:"contained",disabled:v,children:"Confirmer"})})]})})},it="commission_participation_lcc@framalistes.org";var ot={"tr\xe8s chouette":"#2ECC40",chouette:"#FF851B","chouette en alerte":"#FF4136"},st=Object(l.a)(m.a,{target:"e14xbm0g2"})("color:",(function(e){var t=e.$status,n=e.theme;return t&&ot[t.toLowerCase()]||n.palette.secondary.main}),";&::first-letter{text-transform:uppercase;}"),lt=Object(l.a)(Ee.a,{target:"e14xbm0g1"})({name:"1bprvym",styles:"h3{span{font-size:0.5em;}}"}),ut=Object(l.a)(m.a,{target:"e14xbm0g0"})({name:"hwfcu5",styles:"color:red"}),dt=function(){var e=Object(xe.i)().code,t=Oe().openQuestion,n=Object(a.useState)(!1),r=Object(A.a)(n,2),c=r[0],i=r[1],o=Object(s.useQuery)(H,{variables:{code:e}}),l=o.loading,u=o.error,d=o.data;if(l)return Object(p.jsx)(Ue,{});if(u)return Object(p.jsx)(z,{error:u});if(!d||!d.users.length)return null;var j=d.users[0],b=j.enabled,h=j.id,f=j.prenom,v=j.nom,O=j.statut,x=j.nbPiafEffectuees,g=j.nbPiafAttendues,y=j.absenceLongueDureeSansCourses,w=j.attenteCommissionParticipation,C=(null===j||void 0===j?void 0:j.nbDemiPiaf)?x+.5:x,k=function(){var e=Object($.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("Tu souhaites revenir faire tes PIAF et tes courses ? Super ! Confirme-le ici et l'effet sera imm\xe9diat. Pense \xe0 te rendre sur le planning pour t\u2019inscrire \xe0 nouveau sur des cr\xe9neaux de PIAF.");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,Y.mutate({mutation:_,variables:{id:h}});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),S(e.t0);case 13:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object($.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.mutate({mutation:V,variables:{id:h}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[!c&&Object(p.jsx)(Te,{}),Object(p.jsx)($e.a,{my:4,children:Object(p.jsxs)(m.a,{variant:"h2",align:"center",children:[f," ",v]})}),b?Object(p.jsxs)(Ee.a,{container:!0,spacing:2,children:[Object(p.jsxs)(lt,{item:!0,xs:12,md:6,children:[!y&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(m.a,{variant:"h2",children:"Je suis"}),!w&&Object(p.jsx)(st,{variant:"h3",$status:O,children:O}),w&&Object(p.jsx)(st,{variant:"h2",$status:O,children:"en attente de la d\xe9cision de la commission de participation et je peux faire mes courses"})]}),!w&&Object(p.jsxs)(m.a,{variant:"h3",children:[C,"/",g," ",Object(p.jsx)("span",{children:"PIAF attendues"})]}),Object(p.jsx)($e.a,{children:y&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ut,{variant:"h5",children:"Actuellement en pause de PIAF, pour pouvoir faire des courses, je dois cliquer sur le bouton ci-dessous"}),Object(p.jsx)(ue.a,{variant:"contained",color:"primary",size:"large",onClick:k,children:"Je reprends ma participation"})]})}),!(null===j||void 0===j?void 0:j.attenteCommissionParticipation)&&"chouette en alerte"==(null===j||void 0===j?void 0:j.statut.toLowerCase())&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(m.a,{children:"Ce statut t\u2019emp\xeache de faire des courses. Si tu souhaites revenir faire tes courses et PIAF, tu peux saisir la commission participation qui examine les cas particuliers et recherche des solutions. Pour joindre la commission, tu peux cliquer sur le bouton ci-dessous"}),Object(p.jsx)(ue.a,{variant:"contained",color:"primary",size:"large",onClick:function(){i(!0)},children:"joindre la commission"})]})]}),Object(p.jsxs)(Ee.a,{item:!0,xs:12,md:6,children:[Object(p.jsx)(Ke,{userId:h}),Object(p.jsx)(Ze,{userId:h})]}),j&&Object(p.jsx)(ct,{show:c,handleClose:function(){i(!1)},user:j,title:"Si tu confirmes ton souhait, la commission recevra un mail et prendra contact avec toi. Ton statut sera mis en attente de la d\xe9cision de la commission. En attendant, tu pourras faire tes courses.",dialogContent:"Tu peux laisser un commentaire si tu le souhaites.",emailAddress:it,emailSubject:"Saisie commission participation ".concat(j.prenom," ").concat(j.nom),callback:I})]}):Object(p.jsx)(m.a,{align:"center",children:"Utilisateur non activ\xe9"})]})},jt=function(){var e=function(e){var t={};return e.substr(1).split("&").forEach((function(e){if(e){var n=e.split("=");2===n.length&&(t[n[0]]=decodeURIComponent(n[1]))}})),t}(Object(xe.h)().search).next;return Object(p.jsx)(ge.a,{children:Object(p.jsxs)(xe.d,{children:[Object(p.jsx)(xe.b,{path:"/home",children:Object(p.jsx)(De,{})}),Object(p.jsx)(xe.b,{path:"/user/:code",children:Object(p.jsx)(dt,{})}),Object(p.jsx)(xe.a,{to:e||"/home"})]})})},bt=n(226),mt=n(227),pt=n(228),ht=n(229);function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ot=a.createElement("path",{d:"M61.585 422.116v58.818h22.67v14.24H44.713v-73.058zM135.514 468.447l-8.98-24.533-9.093 24.533zm4.6 12.924h-27.6l-5.585 13.803H89.402l29.464-73.058h15.446l28.808 73.058h-17.527z",fill:"#314b3f"}),xt=a.createElement("g",{transform:"matrix(1.33333 0 0 -1.33333 0 756)",fill:"#314b3f"},a.createElement("path",{d:"M187.233 197.273c-4.847-2.463-8.789-2.955-12.075-2.955-10.106 0-16.922 3.45-21.524 7.966-4.927 4.765-8.543 11.994-8.543 20.786 0 8.626 3.616 15.854 8.543 20.62 4.847 4.681 11.913 7.884 20.454 7.884 3.616 0 7.805-.739 13.145-3.04v-14.62c-2.793 2.956-6.98 5.83-12.814 5.83-4.6 0-8.298-1.48-11.17-4.27-3.042-2.959-5.178-7.393-5.178-12.652 0-5.666 2.3-9.693 4.764-12.076 1.152-1.148 5.093-4.599 11.83-4.599 3.287 0 7.721.902 12.568 5.668zM209.99 229.476h21.85v20.866h12.651v-54.793H231.84v23.248h-21.85v-23.248h-12.653v54.793h12.653zM271.76 235.23c-2.38-2.301-4.846-6.326-4.846-12.407 0-5.012 1.643-9.037 5.01-12.323 3.533-3.367 7.479-4.519 11.748-4.519 5.586 0 9.529 2.054 12.159 4.684 2.134 2.052 4.766 5.914 4.766 12.241 0 5.667-2.301 9.855-4.766 12.323-2.71 2.627-7.066 4.681-12.077 4.681-4.764 0-9.036-1.726-11.993-4.68m33.269 8.376c5.175-5.012 8.544-12.239 8.544-20.7 0-7.313-2.626-14.788-8.544-20.537-5.093-4.932-11.993-8.05-21.193-8.05-10.27 0-17.25 4.107-21.358 8.05-5.258 4.928-8.544 12.322-8.544 20.37 0 7.888 3.53 15.855 8.46 20.783 3.699 3.7 10.515 8.052 21.442 8.052 8.544 0 15.69-2.628 21.193-7.968M369.353 217.894c0-5.258-.657-11.747-6.08-17.333-5.259-5.422-11.335-6.243-17.085-6.243-5.752 0-11.83.821-17.087 6.243-5.424 5.586-6.081 12.075-6.081 17.333v32.447h12.654v-32.12c0-2.38.163-6.406 2.873-9.2 2.217-2.38 5.257-2.873 7.641-2.873 2.38 0 5.42.493 7.638 2.873 2.711 2.795 2.876 6.82 2.876 9.2v32.12h12.651zM412.315 239.664h-18.317v-10.598h17.415v-10.678h-17.415v-12.16h18.317V195.55h-30.97v54.793h30.97zM441.807 239.664V195.55h-12.65v44.115h-11.913v10.678h36.475v-10.678zM483.862 239.664V195.55h-12.649v44.115H459.3v10.678h36.476v-10.678zM533.396 239.664h-18.315v-10.598h17.413v-10.678h-17.413v-12.16h18.315V195.55H502.43v54.793h30.967zM150.376 147.294h14.159v-6.497h-14.159zM216.303 142.846v-6.907s.07-10.871-9.847-10.871c-9.913 0-9.844 10.87-9.844 10.87v29.614s-.07 10.87 9.844 10.87c9.917 0 9.847-10.87 9.847-10.87v-6.91H209.4v6.91s.27 3.69-2.806 3.69c-2.6 0-2.6-3.69-2.6-3.69v-29.613s0-3.691 2.6-3.691c3.077 0 2.806 3.69 2.806 3.69v6.908zM257.48 169.241c-2.598 0-2.462-3.689-2.462-3.689v-29.614s-.136-3.69 2.461-3.69c2.6 0 2.465 3.69 2.465 3.69v29.614s.135 3.69-2.465 3.69m0-44.175c-9.916 0-9.845 10.871-9.845 10.871v29.614s-.07 10.871 9.845 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M309.045 169.241c-2.598 0-2.461-3.689-2.461-3.689v-29.614s-.137-3.69 2.46-3.69c2.599 0 2.466 3.69 2.466 3.69v29.614s.133 3.69-2.465 3.69m0-44.175c-9.913 0-9.847 10.871-9.847 10.871v29.614s-.066 10.871 9.847 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M358.63 153.24c4.65 0 5.54 1.71 5.54 7.32 0 5.607-.89 7.792-5.54 7.792zm-7.385 22.635h7.385c6.43 0 12.993-3.488 12.993-15.044 0-11.556-6.563-15.113-12.993-15.113v-20.103h-7.385zM402.399 147.294h14.157v-6.497h-14.157zM281.567 382.087a.789.789 0 011.375 0l3.075 5.445a.79.79 0 01-.13.947l-3.073 3.075a.792.792 0 01-1.118 0l-3.074-3.075a.79.79 0 01-.129-.947zM304.03 401.252a3.2 3.2 0 003.195-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308-8.307-3.727-8.307-8.308c0-4.58 3.725-8.308 8.307-8.308M261.852 401.252a3.2 3.2 0 003.196-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308c-4.581 0-8.31-3.727-8.31-8.308 0-4.58 3.729-8.308 8.31-8.308"}),a.createElement("path",{d:"M326.169 356.778c-4.608-20.494-16.665-32.974-22.36-38.441a76.7 76.7 0 013.984 12.545c1.569 6.95 2.219 13.674 1.985 20.554-.006.193-.035.38-.077.562a49.412 49.412 0 0118.185 22.554c.139-6.01-.418-11.997-1.717-17.774m-55.152-11.866a48.987 48.987 0 0111.239-1.313c7.694 0 14.98 1.783 21.47 4.949a74.272 74.272 0 00-1.845-16.332c-2.415-10.696-6.664-18.27-9.76-23.135-8.12-5.194-19.32-10.255-34.45-13.325 9.88 15.04 14.362 31.548 13.346 49.156m-30.591-61.684v83.767a49.396 49.396 0 0123.956-20.015c1.587-17.966-2.98-34.741-13.59-49.862l-1.18-1.684c-3.438-4.91-6.265-8.95-9.186-12.206m4.686 132.08c.35.404.703.81 1.114 1.183 1.183 1.212 2.607 2.275 4.11 3.266 1.56.914 3.226 1.714 5.002 2.268.44.145.9.223 1.35.342.46.13.894.204 1.312.256.455.05.778.169 1.34.184l1.616.075.123.008.024-.001.087-.005.348-.018.697-.032c.469 0 .93-.052 1.386-.14.925-.104 1.82-.328 2.714-.555 1.756-.552 3.44-1.283 4.967-2.228 1.483-.994 2.91-2.048 4.054-3.293.633-.568 1.087-1.26 1.647-1.848.465-.652.964-1.27 1.359-1.913.79-1.29 1.453-2.541 1.957-3.704.237-.593.456-1.148.66-1.662l.458-1.447c.305-.878.412-1.653.549-2.141.128-.5.194-.766.194-.766l.194.77c.14.498.243 1.233.55 2.125.14.443.295.934.462 1.468.223.517.429 1.077.662 1.665a30.81 30.81 0 001.966 3.71c.4.642.895 1.263 1.366 1.913.56.59 1.013 1.284 1.653 1.85 1.14 1.249 2.578 2.3 4.066 3.29 1.524.955 3.22 1.67 4.979 2.223l1.348.33c.448.106.854.127 1.28.21l.643.106.808.037.809.037.382.018.064-.005.174-.01c1.877.002 3.73-.371 5.525-.87 1.788-.543 3.459-1.364 5.03-2.27 1.519-.985 2.95-2.05 4.152-3.255.397-.355.74-.744 1.079-1.13a43.206 43.206 0 006.362-22.618c0-23.974-19.505-43.48-43.478-43.48-19.874 0-43.48 15.249-43.48 43.48a43.22 43.22 0 006.336 22.577m37.144 20.9c9.559 0 18.403-3.107 25.588-8.357-1.364.293-2.761.48-4.175.502l-.23.01-.115.006-.248-.011-.405-.024-.808-.05-.808-.05-.954-.143c-.63-.112-1.302-.188-1.887-.36l-1.743-.513c-2.272-.8-4.373-1.928-6.164-3.311-1.756-1.418-3.315-2.953-4.458-4.643-.626-.8-1.07-1.694-1.558-2.5-.396-.864-.798-1.681-1.101-2.497a20.82 20.82 0 01-1.012-3.644 20.73 20.73 0 01-1.004 3.618c-.297.815-.704 1.627-1.093 2.492-.485.806-.932 1.693-1.552 2.496-1.141 1.684-2.684 3.223-4.433 4.642-1.786 1.38-3.876 2.513-6.14 3.324-1.148.348-2.31.717-3.525.869-.6.117-1.204.193-1.818.212l-.916.055-.458.026-.115.005-.058.004h-.03l-.17-.004-.201-.01-1.615-.095c-.515-.02-1.243-.171-1.85-.26-.15-.022-.29-.052-.436-.077 7.168 5.207 15.974 8.289 25.492 8.289m49.13-43.478c0 27.09-22.04 49.13-49.13 49.13-27.092 0-48.717-22.04-48.717-49.13V275.847c0-1.223 1.104-2.34 2.195-2.89a3.235 3.235 0 013.38.288c5.23 3.866 9.072 8.927 13.832 15.678.03.004.06.002.092.007 18.943 3.025 32.639 9.04 42.319 15.244.488.16 8.738 6.323 11.397 8.845 4.905 4.647 19.83 18.792 25.153 42.468 2.653 11.798-.52 37.129-.52 37.244"}));function gt(e,t){var n=e.title,r=e.titleId,c=vt(e,["title","titleId"]);return a.createElement("svg",ft({xmlns:"http://www.w3.org/2000/svg",width:756,height:756,viewBox:"0 0 756 756",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,Ot,xt)}var yt=a.forwardRef(gt),wt=(n.p,n(236)),St=n(225);var Ct=Object(l.a)("div",{target:"enzy0d42"})({name:"1v1mlyy",styles:"display:flex;flex-direction:row-reverse;justify-content:space-between"}),kt=Object(l.a)(ue.a,{target:"enzy0d41"})({name:"3zy121",styles:"margin:20px"}),It=Object(l.a)(wt.a,{target:"enzy0d40"})({name:"1h3rtzg",styles:"align-items:center"}),Pt=function(e){var t=e.iframeSrc,n=e.setIframeSrc,r=N(),a=r.logout,c=r.auth,i=Oe().openQuestion,o=function(){var e=Object($.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i("Es-tu s\xfbr\xb7e de vouloir fermer la session ?");case 2:e.sent&&a();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c?Object(p.jsxs)(Ct,{children:[Object(p.jsx)(kt,{disabled:!!t.label,onClick:o,children:"D\xe9connexion"}),t.label&&Object(p.jsxs)(kt,{startIcon:Object(p.jsx)(St.a,{}),variant:"contained",color:"primary",onClick:function(){var e;n({label:"",url:""}),null===(e=document.getElementById("codeInput"))||void 0===e||e.focus()},children:["Quitter ",t.label," et revenir \xe0 Participation"]}),window.localStorage.lcc_defaultLogin&&window.localStorage.lcc_defaultLogin!==(null===c||void 0===c?void 0:c.user.email)&&Object(p.jsx)(It,{severity:"warning",children:"Vous n'\xeates pas connect\xe9 avec le compte par d\xe9faut"})]}):null};var zt=Object(l.a)("div",{target:"e110uiv13"})({name:"1yply97",styles:"display:flex;flex-direction:column;align-items:center;text-align:center;svg{width:250px;height:250px;margin:-20px 0;}"}),Ft=Object(l.a)("div",{target:"e110uiv12"})({name:"qa43uy",styles:"display:flex;margin-bottom:10px;svg{width:50px;height:50px;margin:0;}"}),Mt=Object(l.a)(ue.a,{target:"e110uiv11"})({name:"1q9scp8",styles:"display:flex;align-items:center;span{flex-direction:column;}"}),qt=Object(l.a)("div",{target:"e110uiv10"})({name:"74mntk",styles:"position:fixed;top:100px;width:100vw;height:calc(100vh - 100px);z-index:100"}),Dt=function(){var e=Object(a.useState)({label:"",url:""}),t=Object(A.a)(e,2),n=t[0],r=t[1],c=N().auth;return Object(p.jsxs)(le.a,{children:[Object(p.jsxs)(ve,{children:[Object(p.jsx)(Pt,{iframeSrc:n,setIframeSrc:r}),Object(p.jsxs)(zt,{children:[Object(p.jsx)(yt,{}),c&&Object(p.jsxs)(Ft,{children:[Object(p.jsxs)(Mt,{onClick:function(){r({url:"https://planning.lachouettecoop.fr?random=".concat(Date.now()),label:"Planning"})},children:[Object(p.jsx)(bt.a,{color:"primary",fontSize:"small"})," Planning"]}),Object(p.jsxs)(Mt,{onClick:function(){return r({url:"https://framaforms.org/inscription-reunions-daccueil-la-chouette-coop-1556050737?random=".concat(Date.now()),label:"R\xe9union d'accueil"})},children:[Object(p.jsx)(mt.a,{color:"primary",fontSize:"small"})," R\xe9union d'accueil"]}),Object(p.jsxs)(Mt,{onClick:function(){return r({url:"https://framaforms.org/inscription-periode-dessai-la-chouette-coop-1675259293?random=".concat(Date.now()),label:"P\xe9riode d'essai"})},children:[Object(p.jsx)(pt.a,{color:"primary",fontSize:"small"})," P\xe9riode d'essai"]}),Object(p.jsxs)(Mt,{onClick:function(){return r({url:"https://docs.google.com/forms/d/e/1FAIpQLSezjphy6KurmbI-2P2-FC9DTXsnGPzO_Om87knU7Ykfd9Sbqw/viewform",label:"Demande Produit"})},children:[Object(p.jsx)(ht.a,{color:"primary",fontSize:"small"})," Demande Produit"]})]}),Object(p.jsx)(m.a,{variant:"h1",children:"Participation"})]}),c?Object(p.jsx)(jt,{}):Object(p.jsx)(Pe,{})]}),c&&n.url&&Object(p.jsx)(qt,{children:Object(p.jsx)("iframe",{src:n.url,style:{borderStyle:"none",width:"100%",height:"100%"}})})]})};o.a.render(Object(p.jsx)(F,{children:Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(se,{children:Object(p.jsx)(s.ApolloProvider,{client:Y,children:Object(p.jsx)(J,{children:Object(p.jsx)(Dt,{})})})})})}),document.getElementById("root"))}},[[178,1,2]]]);
//# sourceMappingURL=main.6ccb4fa0.chunk.js.map