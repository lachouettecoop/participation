{"version":3,"sources":["helpers/errors.tsx","queries.ts","providers/user.tsx","helpers/apollo.ts","providers/theme.tsx","components/InfoDialog.tsx","providers/dialog.tsx","helpers/request.ts","pages/anonymous/Login.tsx","pages/anonymous/index.tsx","pages/authenticated/Home.tsx","components/BackButton.tsx","components/Loading.tsx","helpers/date.ts","components/ActivePiaf.tsx","components/ActivePiafs.tsx","components/UpcomingPiaf.tsx","components/UpcomingPiafs.tsx","pages/authenticated/User.tsx","pages/authenticated/index.tsx","images/logo_white.svg","App.tsx","index.tsx"],"names":["apiKey","process","Bugsnag","start","releaseStage","enabledReleaseStages","appVersion","metadata","deployDate","Date","toString","deployAuthor","plugins","BugsnagPluginReact","handleError","error","console","alert","message","notify","Boundary","getPlugin","createErrorBoundary","React","Container","ErrorBlock","Typography","variant","aria-hidden","String","Text","ErrorMessage","ErrorBoundary","children","FallbackComponent","USER_BY_ID","gql","USER_BY_CODE","USER_SEARCH","PIAFS","FILL","UserContext","createContext","STORAGE_KEY","getStoredUser","stored","localStorage","getItem","JSON","parse","UserProvider","useState","auth","setAuth","login","a","userId","token","apollo","query","variables","id","result","user","data","rolesChouette","find","roleUniqueId","prenom","setItem","stringify","Provider","value","logout","removeItem","useUser","useContext","link","createHttpLink","uri","authLink","setContext","_","previous","headers","client","ApolloClient","concat","cache","InMemoryCache","TITLE_FONT","TEXT_FONT","THEME","createMuiTheme","typography","fontFamily","body1","fontSize","body2","subtitle1","subtitle2","h1","fontWeight","h2","h3","h4","h5","h6","palette","primary","main","secondary","contrastThreshold","tonalOffset","ThemeProvider","theme","CssBaseline","InfoDialog","open","handleClose","title","Dialog","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","onClick","color","DialogContext","DialogProvider","setOpen","setTitle","setMessage","closeDialog","openDialog","newMessage","newTitle","post","path","body","fetch","method","response","ok","HttpError","status","statusText","json","LoginPage","loading","setLoading","handleSubmit","event","preventDefault","FormData","currentTarget","maxWidth","onSubmit","TextField","type","name","label","fullWidth","margin","size","disabled","Anonymous","pathname","useLocation","Login","to","Row","spacing","HomePage","push","useHistory","useLazyQuery","search","elements","namedItem","code","handleSearch","lastname","firstname","nom","autoFocus","List","users","map","codeBarre","email","ListItem","button","component","Link","ListItemText","PositionnedButton","BackButton","timer","setTimer","goBack","useEffect","timeout","setTimeout","clearTimeout","onKeyDown","key","document","addEventListener","removeEventListener","$height","Loading","height","CircularProgress","formatInFrench","date","pattern","format","locale","fr","formatTime","queryDate","ActivePiaf","piaf","handleClick","mutate","mutation","Box","marginY","pourvu","endIcon","Check","creneau","debut","fin","titre","ActivePiafs","now","useQuery","after","before","addDays","piafs","length","mb","UpcomingPiaf","end","disableGutters","UpcomingPiafs","COLORS","chouette","StatusText","$status","Status","Grid","UserPage","useParams","enabled","statut","nbPiafEffectuees","nbPiafAttendues","my","align","container","item","xs","md","LogoutButton","Authenticated","next","params","substr","split","forEach","part","tuple","decodeURIComponent","getParams","Home","User","_extends","Object","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","fill","transform","SvgLogoWhite","_ref","svgRef","titleId","props","xmlns","width","viewBox","ref","ForwardRef","Header","App","window","confirm","location","href","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b76db396.chunk.js","sourcesContent":["import React, { ErrorInfo, FC } from \"react\"\nimport Bugsnag from \"@bugsnag/js\"\nimport BugsnagPluginReact from \"@bugsnag/plugin-react\"\nimport styled from \"@emotion/styled/macro\"\nimport { Typography } from \"@material-ui/core\"\n\nconst apiKey = process.env.REACT_APP_BUGSNAG_KEY\n\nif (apiKey) {\n  Bugsnag.start({\n    apiKey,\n    releaseStage: process.env.NODE_ENV,\n    enabledReleaseStages: [\"production\"],\n    appVersion: process.env.REACT_APP_COMMIT,\n    metadata: {\n      deployDate: new Date().toString(),\n      deployAuthor: process.env.REACT_APP_AUTHOR,\n    },\n    plugins: [new BugsnagPluginReact()],\n  })\n}\n\n// TODO: show nicer message\nexport const handleError = (error: Error) => {\n  console.error(error)\n  alert(error.message)\n  if (apiKey) {\n    Bugsnag.notify(error)\n  }\n}\n\nconst Boundary = apiKey ? Bugsnag.getPlugin(\"react\")?.createErrorBoundary(React) : null\n\nconst Container = styled.div`\n  padding: 1rem;\n  h2 {\n    color: #e53935;\n    margin: 1rem 0;\n  }\n  code {\n    display: block;\n    margin-top: 3rem;\n    color: #aaa;\n  }\n`\n\n// https://github.com/bugsnag/bugsnag-js/blob/next/packages/plugin-react/types/bugsnag-plugin-react.d.ts\ninterface FallbackProps {\n  error: Error\n  info?: ErrorInfo\n  clearError?: () => void\n}\n\nexport const ErrorBlock = ({ error }: FallbackProps) => (\n  <Container>\n    <Typography variant=\"h2\">\n      <span aria-hidden>🐞</span>\n      <br />\n      Une erreur est survenue\n    </Typography>\n    <Typography>Essayez de recharger la page</Typography>\n    <code>{String(error)}</code>\n  </Container>\n)\n\nconst Text = styled.p`\n  color: #e53935;\n`\n\ninterface MessageProps {\n  error: Error\n}\n\nexport const ErrorMessage = ({ error }: MessageProps) => <Text>Erreur : {error.message}</Text>\n\nexport const ErrorBoundary: FC = ({ children }) =>\n  Boundary ? <Boundary FallbackComponent={ErrorBlock}>{children}</Boundary> : <>{children}</>\n","import { gql } from \"@apollo/client\"\n\nexport const USER_BY_ID = gql`\n  query($id: ID!) {\n    user(id: $id) {\n      id\n      enabled\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n    }\n  }\n`\n\nexport const USER_BY_CODE = gql`\n  query($code: String!) {\n    users(codeBarre: $code) {\n      id\n      enabled\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      telephone\n      statut\n      nbPiafEffectuees\n      nbPiafAttendues\n    }\n  }\n`\n\nexport const USER_SEARCH = gql`\n  query($lastname: String, $firstname: String) {\n    users(nom: $lastname, prenom: $firstname) {\n      id\n      codeBarre\n      enabled\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n    }\n  }\n`\n\nexport const PIAFS = gql`\n  query PIAFS($userId: String, $after: String, $before: String, $statut: String) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }, statut: $statut) {\n      id\n      statut\n      pourvu\n      creneau {\n        id\n        titre\n        debut\n        fin\n      }\n      piaffeur {\n        id\n        prenom\n        nom\n        username\n      }\n      role {\n        id\n        roleUniqueId\n        libelle\n      }\n    }\n  }\n`\n\nexport const FILL = gql`\n  mutation($id: ID!) {\n    updatePiaf(input: { id: $id, pourvu: true }) {\n      piaf {\n        id\n        pourvu\n      }\n      clientMutationId\n    }\n  }\n`\n","import type { User } from \"src/types/model\"\n\nimport { createContext, useContext, useState, FC } from \"react\"\n\nimport { USER_BY_ID } from \"src/queries\"\nimport apollo from \"src/helpers/apollo\"\n\nexport interface LoginResponse {\n  userId: number\n  token: string\n}\n\nexport interface Auth {\n  token: string\n  user: User\n}\n\nexport interface IUserContext<IsAuthenticated extends boolean = false> {\n  auth: IsAuthenticated extends true ? Auth : Auth | null\n  login: (response: LoginResponse) => Promise<void>\n  logout: () => void\n}\n\nconst UserContext = createContext<IUserContext>({} as IUserContext)\n\nconst STORAGE_KEY = \"auth\"\n\nexport const getStoredUser = () => {\n  const stored = localStorage.getItem(STORAGE_KEY)\n  if (!stored) {\n    return null\n  }\n  return JSON.parse(stored) as Auth\n}\n\nexport const UserProvider: FC = ({ children }) => {\n  const [auth, setAuth] = useState<Auth | null>(getStoredUser)\n\n  const login = async ({ userId, token }: LoginResponse) => {\n    const result = await apollo.query<{ user: User }>({\n      query: USER_BY_ID,\n      variables: { id: `api/users/${userId}` },\n    })\n    const { user } = result.data\n\n    if (!user.rolesChouette.find(({ roleUniqueId }) => roleUniqueId === \"GH\")) {\n      alert(`${user.prenom}, vous n’êtes pas Grand Hibou`)\n      return\n    }\n\n    const data = {\n      token,\n      user,\n    }\n    setAuth(data)\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(data))\n  }\n\n  const logout = () => {\n    setAuth(null)\n    localStorage.removeItem(STORAGE_KEY)\n  }\n\n  return <UserContext.Provider value={{ auth, login, logout }}>{children}</UserContext.Provider>\n}\n\nexport function useUser<IsAuthenticated extends boolean = false>() {\n  return useContext(UserContext) as IUserContext<IsAuthenticated>\n}\n","import { ApolloClient, createHttpLink, InMemoryCache } from \"@apollo/client\"\nimport { setContext } from \"@apollo/client/link/context\"\n\nimport { getStoredUser } from \"src/providers/user\"\n\nconst link = createHttpLink({\n  uri: `${process.env.REACT_APP_API}/api/graphql`,\n})\n\nconst authLink = setContext((_, previous) => {\n  const user = getStoredUser()\n  if (!user) {\n    return previous\n  }\n  return {\n    ...previous,\n    headers: {\n      ...previous.headers,\n      \"X-Auth-Token\": user.token,\n    },\n  }\n})\n\nconst client = new ApolloClient({\n  link: authLink.concat(link),\n  cache: new InMemoryCache(),\n})\n\nexport default client\n","import type { FC } from \"react\"\n\nimport { createMuiTheme, ThemeProvider as MUIThemeProvider, Theme as MUITheme } from \"@material-ui/core/styles\"\nimport { CssBaseline } from \"@material-ui/core\"\nimport { ThemeProvider as EmotionThemeProvider } from \"@emotion/react/macro\"\n\n// see public/index.html\nconst TITLE_FONT = \"Montserrat, sans-serif\" // https://style.lachouettecoop.fr/#/typographie?a=titres-et-sous-titres\nconst TEXT_FONT = \"Cabin, sans-serif\" // https://style.lachouettecoop.fr/#/typographie?a=texte\n\nconst MAIN_COLOR = \"#445448\" // https://style.lachouettecoop.fr/#/couleurs\nconst SECONDARY_COLOR = \"#9e9e9e\" // material grey 500\n\ndeclare module \"@emotion/react\" {\n  // eslint-disable-next-line @typescript-eslint/no-empty-interface\n  export interface Theme extends MUITheme {}\n}\n\nconst THEME = createMuiTheme({\n  typography: {\n    fontFamily: TEXT_FONT,\n    body1: {\n      fontFamily: TEXT_FONT,\n      fontSize: \"1rem\",\n    },\n    body2: {\n      fontFamily: TEXT_FONT,\n      fontSize: \"1rem\",\n    },\n    subtitle1: {\n      fontFamily: TITLE_FONT,\n    },\n    subtitle2: {\n      fontFamily: TITLE_FONT,\n    },\n    h1: {\n      fontFamily: TITLE_FONT,\n      fontWeight: 600,\n      fontSize: \"2.5rem\",\n    },\n    h2: {\n      fontFamily: TITLE_FONT,\n      fontWeight: 600,\n      fontSize: \"1.5rem\",\n    },\n    h3: {\n      fontFamily: TITLE_FONT,\n      fontWeight: 500,\n    },\n    h4: {\n      fontFamily: TITLE_FONT,\n    },\n    h5: {\n      fontFamily: TITLE_FONT,\n    },\n    h6: {\n      fontFamily: TITLE_FONT,\n    },\n  },\n  palette: {\n    primary: {\n      // light: will be calculated from palette.primary.main,\n      main: MAIN_COLOR,\n      // dark: will be calculated from palette.primary.main,\n      // contrastText: will be calculated to contrast with palette.primary.main\n    },\n    secondary: {\n      main: SECONDARY_COLOR,\n    },\n    // Used by `getContrastText()` to maximize the contrast between\n    // the background and the text.\n    contrastThreshold: 3,\n    // Used by the functions below to shift a color's luminance by approximately\n    // two indexes within its tonal palette.\n    // E.g., shift from Red 500 to Red 300 or Red 700.\n    tonalOffset: 0.2,\n  },\n})\n\nconst ThemeProvider: FC = ({ children }) => (\n  <EmotionThemeProvider theme={THEME}>\n    <MUIThemeProvider theme={THEME}>\n      <CssBaseline />\n      {children}\n    </MUIThemeProvider>\n  </EmotionThemeProvider>\n)\n\nexport default ThemeProvider\n","import React from \"react\"\nimport Button from \"@material-ui/core/Button\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogContentText from \"@material-ui/core/DialogContentText\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\n\ninterface Props {\n  open: boolean\n  handleClose: (event: React.MouseEvent<HTMLButtonElement>) => void\n  title: string\n  message: string\n}\n\nconst InfoDialog = ({ open, handleClose, title, message }: Props) => {\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">{message}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default InfoDialog\n","import { createContext, useContext, useState, FC } from \"react\"\n\nimport InfoDialog from \"src/components/InfoDialog\"\n\ninterface IDialogContext {\n  openDialog: (message: string, title?: string) => void\n  closeDialog: () => void\n}\n\nconst DialogContext = createContext({} as IDialogContext)\n\nexport const DialogProvider: FC = ({ children }) => {\n  const [open, setOpen] = useState(false)\n  const [title, setTitle] = useState(\"\")\n  const [message, setMessage] = useState(\"\")\n\n  const openDialog = (newMessage: string, newTitle = \"\") => {\n    setMessage(newMessage)\n    setTitle(newTitle)\n    setOpen(true)\n  }\n\n  const closeDialog = () => {\n    setOpen(false)\n  }\n\n  return (\n    <DialogContext.Provider value={{ openDialog, closeDialog }}>\n      {children}\n      <InfoDialog open={open} handleClose={closeDialog} title={title} message={message}></InfoDialog>\n    </DialogContext.Provider>\n  )\n}\n\nexport const useDialog = () => useContext(DialogContext)\n","import HttpError from \"standard-http-error\"\n\nexport const post = async (path: string, body: BodyInit) => {\n  const response = await fetch(`${process.env.REACT_APP_API}/${path}`, {\n    method: \"POST\",\n    body,\n  })\n  if (!response.ok) {\n    throw new HttpError(response.status, response.statusText)\n  }\n  return response.json()\n}\n\nexport const getParams = (search: string) => {\n  const params: Record<string, string> = {}\n  search\n    .substr(1)\n    .split(\"&\")\n    .forEach((part) => {\n      if (part) {\n        const tuple = part.split(\"=\")\n        if (tuple.length === 2) {\n          params[tuple[0]] = decodeURIComponent(tuple[1])\n        }\n      }\n    })\n  return params\n}\n","import { FormEvent, useState } from \"react\"\nimport { Container, TextField, Button } from \"@material-ui/core\"\n\nimport { useUser, LoginResponse } from \"src/providers/user\"\nimport { post } from \"src/helpers/request\"\nimport { handleError } from \"src/helpers/errors\"\n\nconst LoginPage = () => {\n  const [loading, setLoading] = useState(false)\n  const { login } = useUser()\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    const body = new FormData(event.currentTarget)\n    setLoading(true)\n    try {\n      const auth: LoginResponse = await post(\"login_api\", body)\n      await login(auth)\n    } catch (error) {\n      handleError(error)\n    }\n    setLoading(false)\n  }\n\n  return (\n    <Container maxWidth=\"xs\">\n      <form onSubmit={handleSubmit}>\n        <p>Cette application permet de gérer l’accueil du magasin. Vous devez être Grand Hibou pour vous connecter.</p>\n        <TextField type=\"email\" name=\"username\" label=\"E-mail\" fullWidth variant=\"outlined\" />\n        <TextField type=\"password\" name=\"password\" label=\"Mot de passe\" fullWidth variant=\"outlined\" margin=\"normal\" />\n        <Button type=\"submit\" fullWidth size=\"large\" variant=\"contained\" color=\"primary\" disabled={loading}>\n          Connexion\n        </Button>\n      </form>\n    </Container>\n  )\n}\n\nexport default LoginPage\n","import { Redirect, Route, Switch, useLocation } from \"react-router-dom\"\nimport { Container } from \"@material-ui/core\"\n\nimport LoginPage from \"src/pages/anonymous/Login\"\n\nconst Anonymous = () => {\n  const { pathname } = useLocation()\n\n  return (\n    <Container>\n      <Switch>\n        <Route path=\"/login\">\n          <LoginPage />\n        </Route>\n        <Redirect to={`/login?next=${pathname}`} />\n      </Switch>\n    </Container>\n  )\n}\n\nexport default Anonymous\n","import type { User } from \"src/types/model\"\n\nimport { FormEvent } from \"react\"\nimport { Link, useHistory } from \"react-router-dom\"\nimport { useLazyQuery } from \"@apollo/client\"\nimport { Button, Container, TextField, List, ListItem, ListItemText } from \"@material-ui/core\"\n\nimport { useUser } from \"src/providers/user\"\nimport { USER_SEARCH } from \"src/queries\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport styled from \"@emotion/styled/macro\"\n\nconst Row = styled.div`\n  > div {\n    margin-bottom: ${({ theme }) => theme.spacing(1)}px;\n  }\n  @media (min-width: 470px) {\n    display: flex;\n    > div {\n      flex: 1;\n      &:first-of-type {\n        margin-right: ${({ theme }) => theme.spacing(1)}px;\n      }\n    }\n  }\n`\n\ninterface Result {\n  users: User[]\n}\n\nconst HomePage = () => {\n  const { auth } = useUser<true>()\n  const { push } = useHistory()\n  const [search, { loading, error, data }] = useLazyQuery<Result>(USER_SEARCH)\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    const { elements } = event.currentTarget\n    const { value: code } = elements.namedItem(\"code\") as HTMLInputElement\n    push(\"/user/\" + code)\n  }\n\n  const handleSearch = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    const { elements } = event.currentTarget\n    const { value: lastname } = elements.namedItem(\"lastname\") as HTMLInputElement\n    const { value: firstname } = elements.namedItem(\"firstname\") as HTMLInputElement\n    if (lastname || firstname) {\n      search({ variables: { lastname, firstname } })\n    } else {\n      alert(\"Entrez au moins le début du nom ou du prénom.\")\n    }\n  }\n\n  return (\n    <Container maxWidth=\"xs\">\n      <p>\n        Grand Hibou : {auth.user.prenom} {auth.user.nom}\n      </p>\n      <form onSubmit={handleSubmit}>\n        <TextField name=\"code\" label=\"Code-barres\" fullWidth variant=\"outlined\" margin=\"normal\" autoFocus />\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth size=\"large\">\n          Valider\n        </Button>\n      </form>\n      <form onSubmit={handleSearch}>\n        <p>Vous pouvez aussi chercher par nom, mais la ou le chouettos doit présenter sa carte de membre :</p>\n        <Row>\n          <TextField name=\"lastname\" label=\"Nom\" variant=\"outlined\" fullWidth />\n          <TextField name=\"firstname\" label=\"Prénom\" variant=\"outlined\" fullWidth />\n        </Row>\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth size=\"large\" disabled={loading}>\n          Rechercher\n        </Button>\n        {data && (\n          <List>\n            {data.users.map(({ id, codeBarre, prenom, nom, email }) => (\n              <ListItem key={id} button component={Link} to={`/user/${codeBarre}`}>\n                <ListItemText primary={`${prenom} ${nom}`} secondary={email} />\n              </ListItem>\n            ))}\n          </List>\n        )}\n        {error && <ErrorMessage error={error} />}\n      </form>\n    </Container>\n  )\n}\n\nexport default HomePage\n","import { useEffect, useState } from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport { Button } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nconst INITIAL_TIMER_SECONDS = 30\n\nconst PositionnedButton = styled(Button)`\n  position: absolute;\n  top: 8px;\n  left: 8px;\n`\n\nconst BackButton = () => {\n  const [timer, setTimer] = useState(INITIAL_TIMER_SECONDS)\n  const { goBack } = useHistory()\n\n  useEffect(() => {\n    if (timer <= 0) {\n      goBack()\n      return\n    }\n    const timeout = setTimeout(() => setTimer(timer - 1), 1000)\n    return () => {\n      clearTimeout(timeout)\n    }\n  }, [timer, goBack])\n\n  useEffect(() => {\n    const onKeyDown = ({ key }: KeyboardEvent) => {\n      if (key === \"Escape\") {\n        goBack()\n      }\n    }\n    document.addEventListener(\"keydown\", onKeyDown, false)\n    return () => {\n      document.removeEventListener(\"keydown\", onKeyDown)\n    }\n  })\n\n  return <PositionnedButton onClick={goBack}>Retour (Echap – {timer})</PositionnedButton>\n}\n\nexport default BackButton\n","import styled from \"@emotion/styled/macro\"\nimport { CircularProgress } from \"@material-ui/core\"\n\nconst Container = styled.div<{ $height: number }>`\n  height: ${({ $height }) => $height}px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\ninterface Props {\n  height?: number\n}\n\nconst Loading = ({ height = 300 }: Props) => {\n  return (\n    <Container $height={height}>\n      <CircularProgress />\n    </Container>\n  )\n}\n\nexport default Loading\n","import { format } from \"date-fns\"\nimport fr from \"date-fns/locale/fr\"\n\nconst formatInFrench = (date: Date | number | string, pattern: string) => {\n  if (typeof date === \"string\") {\n    date = new Date(date)\n  }\n  return format(date, pattern, { locale: fr })\n}\n\nexport const formatDate = (date: Date | number | string) => formatInFrench(date, \"EEEE d MMMM\")\n\nexport const formatTime = (date: Date | number | string) => formatInFrench(date, \"HH:mm\")\n\nexport const queryDate = (date: Date | number) => format(date, \"yyyy-MM-dd\")\n","import type { PIAF } from \"src/types/model\"\n\nimport { useState } from \"react\"\nimport { Box, Button } from \"@material-ui/core\"\nimport { Check } from \"@material-ui/icons\"\n\nimport apollo from \"src/helpers/apollo\"\nimport { FILL } from \"src/queries\"\nimport { handleError } from \"src/helpers/errors\"\nimport { formatTime } from \"src/helpers/date\"\n\ninterface Props {\n  piaf: PIAF\n}\n\nconst ActivePiaf = ({ piaf }: Props) => {\n  const [loading, setLoading] = useState(false)\n\n  const handleClick = async () => {\n    setLoading(true)\n    try {\n      await apollo.mutate({ mutation: FILL, variables: { id: piaf.id } })\n    } catch (error) {\n      handleError(error)\n    }\n    setLoading(false)\n  }\n\n  return (\n    <Box marginY={2}>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        size=\"large\"\n        onClick={handleClick}\n        disabled={piaf.pourvu || loading}\n        endIcon={piaf.pourvu ? <Check /> : null}\n      >\n        De {formatTime(piaf.creneau.debut)} à {formatTime(piaf.creneau.fin)} : {piaf.creneau.titre}\n      </Button>\n    </Box>\n  )\n}\n\nexport default ActivePiaf\n","import type { PIAF } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { Box, Typography } from \"@material-ui/core\"\nimport { addDays } from \"date-fns\"\n\nimport { PIAFS } from \"src/queries\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport { queryDate } from \"src/helpers/date\"\nimport ActivePiaf from \"src/components/ActivePiaf\"\nimport Loading from \"src/components/Loading\"\n\ninterface Results {\n  piafs: PIAF[]\n}\n\ninterface Props {\n  userId: string\n}\n\nconst ActivePiafs = ({ userId }: Props) => {\n  const now = new Date()\n  const { loading, error, data } = useQuery<Results>(PIAFS, {\n    variables: {\n      userId,\n      after: queryDate(now),\n      before: queryDate(addDays(now, 1)),\n    },\n  })\n\n  if (loading) {\n    return <Loading height={150} />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data || !data.piafs.length) {\n    return null\n  }\n\n  return (\n    <Box mb={4}>\n      <Typography variant=\"h2\">Vous êtes ici pour faire votre PIAF ?</Typography>\n      <p>Si oui, cliquez dessus pour valider votre présence :</p>\n      {data.piafs.map((piaf) => (\n        <ActivePiaf piaf={piaf} key={piaf.id} />\n      ))}\n    </Box>\n  )\n}\n\nexport default ActivePiafs\n","import type { PIAF } from \"src/types/model\"\n\nimport { ListItem, ListItemText } from \"@material-ui/core\"\n\nimport { formatDate, formatTime } from \"src/helpers/date\"\n\ninterface Props {\n  piaf: PIAF\n}\n\nconst UpcomingPiaf = ({ piaf }: Props) => {\n  const start = piaf.creneau.debut\n  const end = piaf.creneau.fin\n  const title = piaf.creneau.titre\n\n  return (\n    <ListItem disableGutters>\n      <ListItemText primary={`${formatDate(start)} de ${formatTime(start)} à ${formatTime(end)}`} secondary={title} />\n    </ListItem>\n  )\n}\n\nexport default UpcomingPiaf\n","import type { PIAF } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { Typography, List, Box } from \"@material-ui/core\"\nimport { addDays } from \"date-fns\"\n\nimport { PIAFS } from \"src/queries\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport { queryDate } from \"src/helpers/date\"\nimport UpcomingPiaf from \"src/components/UpcomingPiaf\"\nimport Loading from \"src/components/Loading\"\n\ninterface Results {\n  piafs: PIAF[]\n}\n\ninterface Props {\n  userId: string\n}\n\nconst UpcomingPiafs = ({ userId }: Props) => {\n  const now = new Date()\n  const { loading, error, data } = useQuery<Results>(PIAFS, {\n    variables: {\n      userId,\n      after: queryDate(addDays(now, 1)),\n    },\n  })\n\n  if (loading) {\n    return <Loading height={150} />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  return (\n    <Box mb={4}>\n      <Typography variant=\"h2\">Vos PIAFs suivantes</Typography>\n      <List>\n        {data?.piafs.length ? (\n          data.piafs.map((piaf) => <UpcomingPiaf piaf={piaf} key={piaf.id} />)\n        ) : (\n          <p>Aucune PIAF à venir. Inscrivez-vous sur le planning !</p>\n        )}\n      </List>\n    </Box>\n  )\n}\n\nexport default UpcomingPiafs\n","import type { User } from \"src/types/model\"\n\nimport styled from \"@emotion/styled/macro\"\nimport { Box, Grid, Typography } from \"@material-ui/core\"\nimport { useQuery } from \"@apollo/client\"\nimport { useParams } from \"react-router\"\n\nimport { USER_BY_CODE } from \"src/queries\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport BackButton from \"src/components/BackButton\"\nimport Loading from \"src/components/Loading\"\nimport ActivePiafs from \"src/components/ActivePiafs\"\nimport UpcomingPiafs from \"src/components/UpcomingPiafs\"\n\n// https://style.lachouettecoop.fr/#/couleurs\n// TODO: use constants\n// https://github.com/lachouettecoop/chouette-admin-chouettos/blob/master/src/Controller/PlanningController.php#L99-L105\nconst COLORS: Record<string, string> = {\n  \"très chouette\": \"#2ECC40\",\n  chouette: \"#FF851B\",\n  \"chouette en alerte\": \"#FF4136\",\n}\n\nconst StatusText = styled(Typography)<{ $status?: string }>`\n  color: ${({ $status, theme }) => ($status && COLORS[$status]) || theme.palette.secondary.main};\n  &::first-letter {\n    text-transform: uppercase;\n  }\n`\nconst Status = styled(Grid)`\n  h3 {\n    span {\n      font-size: 0.5em;\n    }\n  }\n`\n\ninterface Params {\n  code: string\n}\n\ninterface Results {\n  users: User[]\n}\n\nconst UserPage = () => {\n  const { code } = useParams<Params>()\n\n  const { loading, error, data } = useQuery<Results>(USER_BY_CODE, { variables: { code } })\n\n  if (loading) {\n    return <Loading />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data || !data.users.length) {\n    return null\n  }\n\n  const { enabled, id, prenom, nom, statut, nbPiafEffectuees, nbPiafAttendues } = data.users[0]\n\n  return (\n    <>\n      <BackButton />\n      <Box my={4}>\n        <Typography variant=\"h2\" align=\"center\">\n          {prenom} {nom}\n        </Typography>\n      </Box>\n      {enabled ? (\n        <Grid container spacing={2}>\n          <Status item xs={12} md={6}>\n            <Typography variant=\"h2\">Votre statut</Typography>\n            <StatusText variant=\"h3\" $status={statut}>\n              {statut}\n            </StatusText>\n            <Typography variant=\"h3\">\n              {nbPiafEffectuees}/{nbPiafAttendues} <span>PIAFs attendues</span>\n            </Typography>\n          </Status>\n          <Grid item xs={12} md={6}>\n            <ActivePiafs userId={id} />\n            <UpcomingPiafs userId={id} />\n          </Grid>\n        </Grid>\n      ) : (\n        <Typography align=\"center\">Utilisateur non activé</Typography>\n      )}\n    </>\n  )\n}\n\nexport default UserPage\n","import { Redirect, Route, Switch, useLocation } from \"react-router-dom\"\nimport { Button, Container } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nimport { getParams } from \"src/helpers/request\"\nimport { useUser } from \"src/providers/user\"\n\nimport HomePage from \"src/pages/authenticated/Home\"\nimport UserPage from \"src/pages/authenticated/User\"\n\nconst LogoutButton = styled(Button)`\n  position: absolute;\n  top: 8px;\n  right: 8px;\n`\n\nconst Authenticated = () => {\n  const { search } = useLocation()\n  const { next } = getParams(search)\n  const { logout } = useUser()\n\n  return (\n    <Container>\n      <LogoutButton onClick={logout}>Déconnexion</LogoutButton>\n      <Switch>\n        <Route path=\"/home\">\n          <HomePage />\n        </Route>\n        <Route path=\"/user/:code\">\n          <UserPage />\n        </Route>\n        <Redirect to={next || \"/home\"} />\n      </Switch>\n    </Container>\n  )\n}\n\nexport default Authenticated\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M61.585 422.116v58.818h22.67v14.24H44.713v-73.058zM135.514 468.447l-8.98-24.533-9.093 24.533zm4.6 12.924h-27.6l-5.585 13.803H89.402l29.464-73.058h15.446l28.808 73.058h-17.527z\",\n  fill: \"#314b3f\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"matrix(1.33333 0 0 -1.33333 0 756)\",\n  fill: \"#314b3f\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M187.233 197.273c-4.847-2.463-8.789-2.955-12.075-2.955-10.106 0-16.922 3.45-21.524 7.966-4.927 4.765-8.543 11.994-8.543 20.786 0 8.626 3.616 15.854 8.543 20.62 4.847 4.681 11.913 7.884 20.454 7.884 3.616 0 7.805-.739 13.145-3.04v-14.62c-2.793 2.956-6.98 5.83-12.814 5.83-4.6 0-8.298-1.48-11.17-4.27-3.042-2.959-5.178-7.393-5.178-12.652 0-5.666 2.3-9.693 4.764-12.076 1.152-1.148 5.093-4.599 11.83-4.599 3.287 0 7.721.902 12.568 5.668zM209.99 229.476h21.85v20.866h12.651v-54.793H231.84v23.248h-21.85v-23.248h-12.653v54.793h12.653zM271.76 235.23c-2.38-2.301-4.846-6.326-4.846-12.407 0-5.012 1.643-9.037 5.01-12.323 3.533-3.367 7.479-4.519 11.748-4.519 5.586 0 9.529 2.054 12.159 4.684 2.134 2.052 4.766 5.914 4.766 12.241 0 5.667-2.301 9.855-4.766 12.323-2.71 2.627-7.066 4.681-12.077 4.681-4.764 0-9.036-1.726-11.993-4.68m33.269 8.376c5.175-5.012 8.544-12.239 8.544-20.7 0-7.313-2.626-14.788-8.544-20.537-5.093-4.932-11.993-8.05-21.193-8.05-10.27 0-17.25 4.107-21.358 8.05-5.258 4.928-8.544 12.322-8.544 20.37 0 7.888 3.53 15.855 8.46 20.783 3.699 3.7 10.515 8.052 21.442 8.052 8.544 0 15.69-2.628 21.193-7.968M369.353 217.894c0-5.258-.657-11.747-6.08-17.333-5.259-5.422-11.335-6.243-17.085-6.243-5.752 0-11.83.821-17.087 6.243-5.424 5.586-6.081 12.075-6.081 17.333v32.447h12.654v-32.12c0-2.38.163-6.406 2.873-9.2 2.217-2.38 5.257-2.873 7.641-2.873 2.38 0 5.42.493 7.638 2.873 2.711 2.795 2.876 6.82 2.876 9.2v32.12h12.651zM412.315 239.664h-18.317v-10.598h17.415v-10.678h-17.415v-12.16h18.317V195.55h-30.97v54.793h30.97zM441.807 239.664V195.55h-12.65v44.115h-11.913v10.678h36.475v-10.678zM483.862 239.664V195.55h-12.649v44.115H459.3v10.678h36.476v-10.678zM533.396 239.664h-18.315v-10.598h17.413v-10.678h-17.413v-12.16h18.315V195.55H502.43v54.793h30.967zM150.376 147.294h14.159v-6.497h-14.159zM216.303 142.846v-6.907s.07-10.871-9.847-10.871c-9.913 0-9.844 10.87-9.844 10.87v29.614s-.07 10.87 9.844 10.87c9.917 0 9.847-10.87 9.847-10.87v-6.91H209.4v6.91s.27 3.69-2.806 3.69c-2.6 0-2.6-3.69-2.6-3.69v-29.613s0-3.691 2.6-3.691c3.077 0 2.806 3.69 2.806 3.69v6.908zM257.48 169.241c-2.598 0-2.462-3.689-2.462-3.689v-29.614s-.136-3.69 2.461-3.69c2.6 0 2.465 3.69 2.465 3.69v29.614s.135 3.69-2.465 3.69m0-44.175c-9.916 0-9.845 10.871-9.845 10.871v29.614s-.07 10.871 9.845 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M309.045 169.241c-2.598 0-2.461-3.689-2.461-3.689v-29.614s-.137-3.69 2.46-3.69c2.599 0 2.466 3.69 2.466 3.69v29.614s.133 3.69-2.465 3.69m0-44.175c-9.913 0-9.847 10.871-9.847 10.871v29.614s-.066 10.871 9.847 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M358.63 153.24c4.65 0 5.54 1.71 5.54 7.32 0 5.607-.89 7.792-5.54 7.792zm-7.385 22.635h7.385c6.43 0 12.993-3.488 12.993-15.044 0-11.556-6.563-15.113-12.993-15.113v-20.103h-7.385zM402.399 147.294h14.157v-6.497h-14.157zM281.567 382.087a.789.789 0 011.375 0l3.075 5.445a.79.79 0 01-.13.947l-3.073 3.075a.792.792 0 01-1.118 0l-3.074-3.075a.79.79 0 01-.129-.947zM304.03 401.252a3.2 3.2 0 003.195-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308-8.307-3.727-8.307-8.308c0-4.58 3.725-8.308 8.307-8.308M261.852 401.252a3.2 3.2 0 003.196-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308c-4.581 0-8.31-3.727-8.31-8.308 0-4.58 3.729-8.308 8.31-8.308\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M326.169 356.778c-4.608-20.494-16.665-32.974-22.36-38.441a76.7 76.7 0 013.984 12.545c1.569 6.95 2.219 13.674 1.985 20.554-.006.193-.035.38-.077.562a49.412 49.412 0 0118.185 22.554c.139-6.01-.418-11.997-1.717-17.774m-55.152-11.866a48.987 48.987 0 0111.239-1.313c7.694 0 14.98 1.783 21.47 4.949a74.272 74.272 0 00-1.845-16.332c-2.415-10.696-6.664-18.27-9.76-23.135-8.12-5.194-19.32-10.255-34.45-13.325 9.88 15.04 14.362 31.548 13.346 49.156m-30.591-61.684v83.767a49.396 49.396 0 0123.956-20.015c1.587-17.966-2.98-34.741-13.59-49.862l-1.18-1.684c-3.438-4.91-6.265-8.95-9.186-12.206m4.686 132.08c.35.404.703.81 1.114 1.183 1.183 1.212 2.607 2.275 4.11 3.266 1.56.914 3.226 1.714 5.002 2.268.44.145.9.223 1.35.342.46.13.894.204 1.312.256.455.05.778.169 1.34.184l1.616.075.123.008.024-.001.087-.005.348-.018.697-.032c.469 0 .93-.052 1.386-.14.925-.104 1.82-.328 2.714-.555 1.756-.552 3.44-1.283 4.967-2.228 1.483-.994 2.91-2.048 4.054-3.293.633-.568 1.087-1.26 1.647-1.848.465-.652.964-1.27 1.359-1.913.79-1.29 1.453-2.541 1.957-3.704.237-.593.456-1.148.66-1.662l.458-1.447c.305-.878.412-1.653.549-2.141.128-.5.194-.766.194-.766l.194.77c.14.498.243 1.233.55 2.125.14.443.295.934.462 1.468.223.517.429 1.077.662 1.665a30.81 30.81 0 001.966 3.71c.4.642.895 1.263 1.366 1.913.56.59 1.013 1.284 1.653 1.85 1.14 1.249 2.578 2.3 4.066 3.29 1.524.955 3.22 1.67 4.979 2.223l1.348.33c.448.106.854.127 1.28.21l.643.106.808.037.809.037.382.018.064-.005.174-.01c1.877.002 3.73-.371 5.525-.87 1.788-.543 3.459-1.364 5.03-2.27 1.519-.985 2.95-2.05 4.152-3.255.397-.355.74-.744 1.079-1.13a43.206 43.206 0 006.362-22.618c0-23.974-19.505-43.48-43.478-43.48-19.874 0-43.48 15.249-43.48 43.48a43.22 43.22 0 006.336 22.577m37.144 20.9c9.559 0 18.403-3.107 25.588-8.357-1.364.293-2.761.48-4.175.502l-.23.01-.115.006-.248-.011-.405-.024-.808-.05-.808-.05-.954-.143c-.63-.112-1.302-.188-1.887-.36l-1.743-.513c-2.272-.8-4.373-1.928-6.164-3.311-1.756-1.418-3.315-2.953-4.458-4.643-.626-.8-1.07-1.694-1.558-2.5-.396-.864-.798-1.681-1.101-2.497a20.82 20.82 0 01-1.012-3.644 20.73 20.73 0 01-1.004 3.618c-.297.815-.704 1.627-1.093 2.492-.485.806-.932 1.693-1.552 2.496-1.141 1.684-2.684 3.223-4.433 4.642-1.786 1.38-3.876 2.513-6.14 3.324-1.148.348-2.31.717-3.525.869-.6.117-1.204.193-1.818.212l-.916.055-.458.026-.115.005-.058.004h-.03l-.17-.004-.201-.01-1.615-.095c-.515-.02-1.243-.171-1.85-.26-.15-.022-.29-.052-.436-.077 7.168 5.207 15.974 8.289 25.492 8.289m49.13-43.478c0 27.09-22.04 49.13-49.13 49.13-27.092 0-48.717-22.04-48.717-49.13V275.847c0-1.223 1.104-2.34 2.195-2.89a3.235 3.235 0 013.38.288c5.23 3.866 9.072 8.927 13.832 15.678.03.004.06.002.092.007 18.943 3.025 32.639 9.04 42.319 15.244.488.16 8.738 6.323 11.397 8.845 4.905 4.647 19.83 18.792 25.153 42.468 2.653 11.798-.52 37.129-.52 37.244\"\n}));\n\nfunction SvgLogoWhite(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 756,\n    height: 756,\n    viewBox: \"0 0 756 756\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogoWhite);\nexport default __webpack_public_path__ + \"static/media/logo_white.6e9fcd91.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect } from \"react\"\nimport { BrowserRouter } from \"react-router-dom\"\nimport styled from \"@emotion/styled/macro\"\nimport { Typography } from \"@material-ui/core\"\n\nimport { useUser } from \"src/providers/user\"\nimport { DialogProvider } from \"src/providers/dialog\"\n\nimport Anonymous from \"src/pages/anonymous\"\nimport Authenticated from \"src/pages/authenticated\"\n\nimport { ReactComponent as Logo } from \"src/images/logo_white.svg\"\n\nconst Header = styled.div`\n  text-align: center;\n  svg {\n    width: 250px;\n    height: 250px;\n    margin: -20px 0;\n  }\n`\n\nconst App = () => {\n  const { auth } = useUser()\n\n  useEffect(() => {\n    const redirect = window.confirm(`ATTENTION ! Cet outil n'est pas encore officiel !\nIl affiche la participation en utilisant les données du nouvel outil planning, qui n'est pas encore utilisé.\nCliquez sur OK pour être redirigé·e vers la page de l'espace membre sur laquelle se trouve le lien vers le planning actuel.`)\n\n    if (redirect) {\n      window.location.href = \"https://espace-membres.lachouettecoop.fr/page/tafs\"\n    }\n  }, [])\n\n  return (\n    <BrowserRouter>\n      <Header>\n        <Logo />\n        <Typography variant=\"h1\">Participation</Typography>\n      </Header>\n      <DialogProvider>{auth ? <Authenticated /> : <Anonymous />}</DialogProvider>\n    </BrowserRouter>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { ApolloProvider } from \"@apollo/client\"\n\nimport { ErrorBoundary } from \"src/helpers/errors\"\nimport apollo from \"src/helpers/apollo\"\nimport { UserProvider } from \"src/providers/user\"\nimport ThemeProvider from \"src/providers/theme\"\nimport App from \"src/App\"\n\nReactDOM.render(\n  <ErrorBoundary>\n    <React.StrictMode>\n      <ThemeProvider>\n        <ApolloProvider client={apollo}>\n          <UserProvider>\n            <App />\n          </UserProvider>\n        </ApolloProvider>\n      </ThemeProvider>\n    </React.StrictMode>\n  </ErrorBoundary>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}